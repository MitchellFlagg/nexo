var nexo=nexo||{};nexo.NexoTermList=Backbone.Collection.extend({model:nexo.NexoTerm,url:"http://localhost:8182/graphs/neo4jnexo/vertices?key=name&value=NeXO:8888"}),function(){function n(n){var e={};return n.forEach(function(n,r){e[n]=r}),e}function e(n,e){Object.keys(n).forEach(function(r){e[r]=n[r]})}function r(n){return Math.min.apply(null,n)}function l(n){return Math.max.apply(null,n)}function t(n){return Array.prototype.concat.apply([],n)}function u(n){return Object.keys(n).map(function(e){return n[e]})}function o(n){for(var e={},r=0;n.length>r;++r)for(var l=n[r],t=0;l.length>t;++t){var u=l[t];e[u]=u}var o=[];for(var a in e)o.push(e[a]);return o}function a(n,e,r,l){return function(t){return arguments.length?(e[r]=t,l&&l(t),n):e[r]}}function i(){function n(e){var l=f,t=2*e,u=t+1,o=e;l.length>t&&(o=l[t].pri<l[o].pri?t:o,l.length>u&&(o=l[u].pri<l[o].pri?u:o),o!==e&&(r(e,o),n(o)))}function e(n){for(var e,l=f,t=l[n].pri;n>0&&(e=n>>1,!(t>l[e].pri));)r(n,e),n=e}function r(n,e){var r=f,l=d,t=r[n];r[n]=r[e],r[e]=t,l[r[n].key]=n,l[r[e].key]=e}function l(){return f.length}function t(){return Object.keys(d)}function u(n){return n in d}function o(n){var e=d[n];return void 0!==e?f[e].pri:void 0}function a(n,r){if(n in d)return!1;var l={key:n,pri:r},t=f.length;return d[n]=t,f.push(l),e(t),!0}function i(){return l()>0?f[0].key:void 0}function c(){r(0,f.length-1);var e=f.pop();return delete d[e.key],n(0),e.key}function s(n,r){var l=d[n];if(r>f[l].pri)throw Error("New priority is greater than current priority. Key: "+n+" Old: "+f[l].pri+" New: "+r);f[l].pri=r,e(l)}var f=[],d={};return{size:l,keys:t,has:u,priority:o,add:a,min:i,removeMin:c,decrease:s}}dagre={},dagre.version="0.0.6",dagre.graph={},dagre.graph=function(){function n(n,e,r){var l=n[e];l||(l=n[e]={count:0,edges:{}}),l.count++,l.edges[r]=!0}function e(n,e,r){var l=n[e];0==--l.count?delete n[e]:delete l.edges[r]}function r(n){var e=a[n];if(n in a)return e;throw Error("Node '"+n+"' is not in graph:\n"+(""+d))}function l(n){var e=s[n];if(!e)throw Error("Edge '"+n+"' is not in graph:\n"+(""+d));return e}var a={},i={},c={},s={},d={},h=0;return d.addNode=function(n,e){if(d.hasNode(n))throw Error("Graph already has node '"+n+"':\n"+(""+d));a[n]={id:n,value:e},i[n]={},c[n]={}},d.delNode=function(n){r(n),d.edges(n).forEach(function(n){d.delEdge(n)}),delete i[n],delete c[n],delete a[n]},d.node=function(n){return r(n).value},d.hasNode=function(n){return n in a},d.addEdge=function(e,l,t,u){if(r(l),r(t),null===e)e="_ANON-"+ ++h;else if(d.hasEdge(e))throw Error("Graph already has edge '"+e+"':\n"+(""+d));s[e]={id:e,source:l,target:t,value:u},n(i[t],l,e),n(c[l],t,e)},d.delEdge=function(n){var r=l(n);e(i[r.target],r.source,n),e(c[r.source],r.target,n),delete s[n]},d.edge=function(n){return l(n).value},d.source=function(n){return l(n).source},d.target=function(n){return l(n).target},d.hasEdge=function(n){return n in s},d.successors=function(n){return r(n),f(c[n]).map(function(n){return a[n].id})},d.predecessors=function(n){return r(n),f(i[n]).map(function(n){return a[n].id})},d.neighbors=function(n){r(n);var e={};return f(c[n]).map(function(n){e[n]=!0}),f(i[n]).map(function(n){e[n]=!0}),f(e).map(function(n){return a[n].id})},d.nodes=function(){var n=[];return d.eachNode(function(e){n.push(e)}),n},d.eachNode=function(n){for(var e in a){var r=a[e];n(r.id,r.value)}},d.edges=function(n,e){var l,t;return arguments.length?1===arguments.length?o([d.inEdges(n),d.outEdges(n)]):2===arguments.length?(r(n),r(e),t=c[n],l=e in t?f(t[e].edges):[],l.map(function(n){return s[n].id})):void 0:(l=[],d.eachEdge(function(n){l.push(n)}),l)},d.eachEdge=function(n){for(var e in s){var r=s[e];n(r.id,r.source,r.target,r.value)}},d.inEdges=function(n){return r(n),t(u(i[n]).map(function(n){return f(n.edges)}))},d.outEdges=function(n){return r(n),t(u(c[n]).map(function(n){return f(n.edges)}))},d.subgraph=function(n){var e=dagre.graph();return n.forEach(function(n){e.addNode(n,d.node(n))}),u(s).forEach(function(n){e.hasNode(n.source)&&e.hasNode(n.target)&&e.addEdge(n.id,n.source,n.target,d.edge(n.id))}),e},d.toString=function(){var n="GRAPH:\n";return n+="    Nodes:\n",f(a).forEach(function(e){n+="        "+e+": "+JSON.stringify(a[e].value)+"\n"}),n+="    Edges:\n",f(s).forEach(function(e){var r=s[e];n+="        "+e+" ("+r.source+" -> "+r.target+"): "+JSON.stringify(s[e].value)+"\n"}),n},d},dagre.layout=function(){function n(){var n=dagre.graph(),e=0;return o.nodes.forEach(function(r){var l="id"in r?r.id:"_N"+e++;r.dagre={id:l,width:r.width,height:r.height},n.addNode(l,r.dagre)}),o.edges.forEach(function(r){var l=r.source.dagre.id;if(!n.hasNode(l))throw Error("Source node for '"+r+"' not in node list");var t=r.target.dagre.id;if(!n.hasNode(t))throw Error("Target node for '"+r+"' not in node list");if(r.dagre={points:[]},l!==t){var u="id"in r?r.id:"_E"+e++;r.dagre.id=u,r.dagre.minLen=r.minLen||1,r.dagre.width=r.width||0,r.dagre.height=r.height||0,n.addEdge(u,l,t,r.dagre)}}),n}function e(){var e=g.rankSep();try{if(!o.nodes.length)return;var u=n();u.eachEdge(function(n,e,r,l){l.minLen*=2}),g.rankSep(e/2),c.run(u),s.run(u),r(u),f.run(u),d.run(u),l(u),t(u),c.undo(u)}finally{g.rankSep(e)}return g}function r(n){var e=0;n.eachEdge(function(r,l,t,u){var o=n.node(l).rank,a=n.node(t).rank;if(a>o+1){for(var i=l,c=o+1,s=0;a>c;++c,++s){var f="_D"+ ++e,d={width:u.width,height:u.height,edge:{id:r,source:l,target:t,attrs:u},rank:c,dummy:!0};0===s?d.index=0:c+1===a&&(d.index=1),n.addNode(f,d),n.addEdge(null,i,f,{}),i=f}n.addEdge(null,i,t,{}),n.delEdge(r)}})}function l(n){n.eachNode(function(e,r){if(r.dummy&&"index"in r){var l=r.edge;n.hasEdge(l.id)||n.addEdge(l.id,l.source,l.target,l.attrs);var t=n.edge(l.id).points;t[r.index]={x:r.x,y:r.y,ul:r.ul,ur:r.ur,dl:r.dl,dr:r.dr},n.delNode(e)}})}function t(n){n.eachEdge(function(n,e,r,l){l.reversed&&l.points.reverse()})}function u(n){return function(){return arguments.length?(n.apply(null,arguments),g):n()}}var o={nodes:[],edges:[],debugLevel:0},i=h(),c=dagre.layout.acyclic(),s=dagre.layout.rank(),f=dagre.layout.order(),d=dagre.layout.position(),g={};return g.nodes=a(g,o,"nodes"),g.edges=a(g,o,"edges"),g.orderIters=u(f.iterations),g.nodeSep=u(d.nodeSep),g.edgeSep=u(d.edgeSep),g.universalSep=u(d.universalSep),g.rankSep=u(d.rankSep),g.rankDir=u(d.rankDir),g.debugAlignment=u(d.debugAlignment),g.debugLevel=a(g,o,"debugLevel",function(n){i.enabled(n),c.debugLevel(n),s.debugLevel(n),f.debugLevel(n),d.debugLevel(n)}),g.run=i.wrap("Total layout",e),g},dagre.layout.acyclic=function(){function n(n){function r(e){e in t||(t[e]=l[e]=!0,n.outEdges(e).forEach(function(t){var o,a=n.target(t);a in l?(o=n.edge(t),n.delEdge(t),o.reversed=!0,++u,n.addEdge(t,a,e,o)):r(a)}),delete l[e])}var l={},t={},u=0;n.eachNode(function(n){r(n)}),e.debugLevel>=2&&console.log("Acyclic Phase: reversed "+u+" edge(s)")}var e={debugLevel:0},r=h(),l={};return l.debugLevel=a(l,e,"debugLevel",function(n){r.enabled(n)}),l.run=r.wrap("Acyclic Phase",n),l.undo=function(n){n.eachEdge(function(e,r,l,t){t.reversed&&(delete t.reversed,n.delEdge(e),n.addEdge(e,l,r,t))})},l},dagre.layout.rank=function(){function n(n){e(n),d(n).forEach(function(e){var r=n.subgraph(e);l(r),t(r)})}function e(n){var e={},r=i();for(n.eachNode(function(l){r.add(l,n.inEdges(l).length),e[l]=0});r.size()>0;){var l=r.min();if(r.priority(l)>0)throw Error("Input graph is not acyclic: "+(""+n));r.removeMin();var t=e[l];n.node(l).rank=t,n.outEdges(l).forEach(function(l){var u=n.target(l);e[u]=Math.max(e[u],t+(n.edge(l).minLen||1)),r.decrease(u,r.priority(u)-1)})}}function l(n){function e(o,a){t[o]=!0,n.node(o).rank=a,l[o].forEach(function(l){if(!(l in t)){var i=r[u(o,l)];e(l,a+(n.edges(o,l).length?i:-i))}})}var r={};n.eachEdge(function(n,e,l,t){var o=u(e,l);r[o]=Math.max(r[o]||1,t.minLen||1)});var l=dagre.util.prim(n,function(e,l){return Math.abs(n.node(e).rank-n.node(l).rank)-r[u(e,l)]}),t={};return e(n.nodes()[0],0),l}function t(n){var e=r(n.nodes().map(function(e){return n.node(e).rank}));n.eachNode(function(n,r){r.rank-=e})}function u(n,e){return e>n?n.length+":"+n+"-"+e:e.length+":"+e+"-"+n}var o={debugLevel:0},c=h(),s={};return s.debugLevel=a(s,o,"debugLevel",function(n){c.enabled(n)}),s.run=c.wrap("Rank Phase",n),s},dagre.layout.order=function(){function e(n){var e=r(n),l=s(e),t=c(n,e);f.debugLevel>=2&&console.log("Order phase start cross count: "+t);var o,a,i;for(a=0,i=0;4>i&&f.iterations>a;++a,++i)o=u(n,a,e),t>o&&(l=s(e),t=o,i=0),f.debugLevel>=3&&console.log("Order phase iter "+a+" cross count: "+t);return l.forEach(function(e){e.forEach(function(e,r){n.node(e).order=r})}),f.debugLevel>=2&&(console.log("Order iterations: "+a),console.log("Order phase best cross count: "+t)),l}function r(n){var e=[];return n.eachNode(function(n,r){var l=e[r.rank]||(e[r.rank]=[]);l.push(n)}),e}function l(n){return function(e){var r=[];return n.inEdges(e).forEach(function(e){r.push(n.source(e))}),r}}function t(n){return function(e){var r=[];return n.outEdges(e).forEach(function(e){r.push(n.target(e))}),r}}function u(n,e,r){if(0===e%2)for(var u=1;r.length>u;++u)o(r[u-1],r[u],l(n));else for(var u=r.length-2;u>=0;--u)o(r[u+1],r[u],t(n));return c(n,r)}function o(e,r,l){var t=n(r),u=i(e,r,l),o=r.filter(function(n){return-1!==u[n]});o.sort(function(n,e){return u[n]-u[e]||t[n]-t[e]});for(var a=r.length-1;a>=0;--a)-1!==u[r[a]]&&(r[a]=o.pop())}function i(e,r,l){var t=n(e),u={};return r.forEach(function(n){var e=-1,r=l(n);r.length>0&&(e=0,r.forEach(function(n){e+=t[n]}),e/=r.length),u[n]=e}),u}function s(n){return n.map(function(n){return n.slice(0)})}var f={iterations:24,debugLevel:0},d=h(),g={};return g.iterations=a(g,f,"iterations"),g.debugLevel=a(g,f,"debugLevel",function(n){d.enabled(n)}),g.run=d.wrap("Order Phase",e),g._barycenterLayer=o,g};var c=dagre.layout.order.crossCount=function(n,e){var r,l=0;return e.forEach(function(e){r&&(l+=s(n,r,e)),r=e}),l},s=dagre.layout.order.bilayerCrossCount=function(e,r,l){var t=n(l),u=[];r.forEach(function(n){var r=[];e.outEdges(n).forEach(function(n){r.push(t[e.target(n)])}),r.sort(function(n,e){return n-e}),u=u.concat(r)});for(var o=1;l.length>o;)o<<=1;var a=2*o-1;o-=1;for(var i=[],c=0;a>c;++c)i[c]=0;var s=0;return u.forEach(function(n){var e=n+o;for(++i[e];e>0;)e%2&&(s+=i[e+1]),e=e-1>>1,++i[e]}),s};dagre.layout.position=function(){function n(n){var e=[];n.eachNode(function(n,r){var l=e[r.rank]||(e[r.rank]=[]);l[r.order]=n});var u=t(n,e),a={};["u","d"].forEach(function(r){"d"===r&&e.reverse(),["l","r"].forEach(function(l){"r"===l&&g(e);var t=r+l,c=o(n,e,u,"u"===r?"predecessors":"successors");a[t]=i(n,e,c.pos,c.root,c.align),"r"===l&&d(a[t]),"r"===l&&g(e)}),"d"===r&&e.reverse()}),f(n,e,a),n.eachNode(function(e){var r=[];for(var l in a)y(l,n,e,a[l][e]),r.push(a[l][e]);r.sort(function(n,e){return n-e}),b(n,e,(r[1]+r[2])/2)});var c=r(n.nodes().map(function(e){return b(n,e)-p(n,e)/2}));n.eachNode(function(e){b(n,e,b(n,e)-c)});var s=0;e.forEach(function(e){var r=l(e.map(function(e){return v(n,e)}));s+=r/2,e.forEach(function(e){E(n,e,s)}),s+=r/2+x.rankSep})}function e(n,e){return e>n?(""+n).length+":"+n+"-"+e:(""+e).length+":"+e+"-"+n}function t(n,r){var l={},t={};if(2>=r.length)return l;r[1].forEach(function(n,e){t[n]=e});for(var u=1;r.length-1>u;++u)for(var o=r[u],a=r[u+1],i=0,c=0,s=0;a.length>s;++s){var f=a[s];t[f]=s;var d=void 0;if(n.node(f).dummy){var h=n.predecessors(f)[0];n.node(h).dummy&&(d=t[h])}if(void 0===d&&s===a.length-1&&(d=o.length-1),void 0!==d){for(;s>=c;++c)n.predecessors(a[c]).forEach(function(n){var r=t[n];(i>r||r>d)&&(l[e(a[c],n)]=!0)});i=d}}return l}function o(n,r,l,t){var u={},o={},a={};return r.forEach(function(n){n.forEach(function(n,e){o[n]=n,a[n]=n,u[n]=e})}),r.forEach(function(r){var i=-1;r.forEach(function(r){var c,s=n[t](r);s.length>0&&(s.sort(function(n,e){return u[n]-u[e]}),c=(s.length-1)/2,s.slice(Math.floor(c),Math.ceil(c)+1).forEach(function(n){a[r]===r&&!l[e(n,r)]&&u[n]>i&&(a[n]=r,a[r]=o[r]=o[n],i=u[n])}))})}),{pos:u,root:o,align:a}}function i(n,e,r,l,t){function o(e){if(!(e in s)){s[e]=0;var u=e;do{if(r[u]>0){var f=l[c[u]];o(f),a[e]===e&&(a[e]=a[f]);var d=m(n,c[u])+m(n,u);a[e]!==a[f]?i[a[f]]=Math.min(i[a[f]]||Number.POSITIVE_INFINITY,s[e]-s[f]-d):s[e]=Math.max(s[e],s[f]+d)}u=t[u]}while(u!==e)}}var a={},i={},c={},s={};return e.forEach(function(n){n.forEach(function(e,r){a[e]=e,r>0&&(c[e]=n[r-1])})}),u(l).forEach(function(n){o(n)}),e.forEach(function(n){n.forEach(function(n){s[n]=s[l[n]];var e=i[a[n]];l[n]===n&&Number.POSITIVE_INFINITY>e&&(s[n]+=e)})}),s}function c(n,e,l){return r(e.map(function(n){var e=n[0];return l[e]}))}function s(n,e,r){return l(e.map(function(n){var e=n[n.length-1];return r[e]}))}function f(n,e,r){var l,t={},u={},o={},a=Number.POSITIVE_INFINITY;for(var i in r){var f=r[i];t[i]=c(n,e,f),u[i]=s(n,e,f);var d=u[i]-t[i];a>d&&(a=d,l=i)}["u","d"].forEach(function(n){["l","r"].forEach(function(e){var r=n+e;o[r]="l"===e?t[l]-t[r]:u[l]-u[r]})});for(var i in r)n.eachNode(function(n){r[i][n]+=o[i]})}function d(n){for(var e in n)n[e]=-n[e]}function g(n){n.forEach(function(n){n.reverse()})}function p(n,e){switch(x.rankDir){case"LR":return n.node(e).height;default:return n.node(e).width}}function v(n,e){switch(x.rankDir){case"LR":return n.node(e).width;default:return n.node(e).height}}function m(n,e){if(null!==x.universalSep)return x.universalSep;var r=p(n,e),l=n.node(e).dummy?x.edgeSep:x.nodeSep;return(r+l)/2}function b(n,e,r){switch(x.rankDir){case"LR":if(3>arguments.length)return n.node(e).y;n.node(e).y=r;break;default:if(3>arguments.length)return n.node(e).x;n.node(e).x=r}}function y(n,e,r,l){switch(x.rankDir){case"LR":if(3>arguments.length)return e.node(r)[n];e.node(r)[n]=l;break;default:if(3>arguments.length)return e.node(r)[n];e.node(r)[n]=l}}function E(n,e,r){switch(x.rankDir){case"LR":if(3>arguments.length)return n.node(e).x;n.node(e).x=r;break;default:if(3>arguments.length)return n.node(e).y;n.node(e).y=r}}var x={nodeSep:50,edgeSep:10,universalSep:null,rankSep:30,rankDir:"TB",debugLevel:0},w=h(),A={};return A.nodeSep=a(A,x,"nodeSep"),A.edgeSep=a(A,x,"edgeSep"),A.universalSep=a(A,x,"universalSep"),A.rankSep=a(A,x,"rankSep"),A.rankDir=a(A,x,"rankDir"),A.debugLevel=a(A,x,"debugLevel",function(n){w.enabled(n)}),A.run=w.wrap("Position Phase",n),A},dagre.util={};var f=dagre.util.keys=Object.keys,d=dagre.util.components=function(n){function e(r,t){r in l||(l[r]=!0,t.push(r),n.neighbors(r).forEach(function(n){e(n,t)}))}var r=[],l={};return n.eachNode(function(n){var l=[];e(n,l),l.length>0&&r.push(l)}),r},h=(dagre.util.prim=function(n,e){var r={},l={},t=i();if(0===n.nodes().length)return r;n.eachNode(function(n){t.add(n,Number.POSITIVE_INFINITY),r[n]=[]}),t.decrease(n.nodes()[0],0);for(var u,o=!1;t.size()>0;){if(u=t.removeMin(),u in l)r[u].push(l[u]),r[l[u]].push(u);else{if(o)throw Error("Input graph is not connected:\n"+(""+n));o=!0}n.neighbors(u).forEach(function(n){var r=t.priority(n);if(void 0!==r){var o=e(u,n);r>o&&(l[n]=u,t.decrease(n,o))}})}return r},dagre.util.intersectRect=function(n,e){var r,l,t=n.x,u=n.y,o=e.x-t,a=e.y-u,i=n.width/2,c=n.height/2;return Math.abs(a)*i>Math.abs(o)*c?(0>a&&(c=-c),r=0===a?0:c*o/a,l=c):(0>o&&(i=-i),r=i,l=0===o?0:i*a/o),{x:t+r,y:u+l}},dagre.util.pointStr=function(n){return n.x+","+n.y},function(){var n={},e=!1;return n.enabled=function(r){return arguments.length?(e=r,n):e},n.wrap=function(n,r){return function(){var l=e?(new Date).getTime():null;try{return r.apply(null,arguments)}finally{l&&console.log(n+" time: "+((new Date).getTime()-l)+"ms")}}},n});dagre.dot={},dagre.dot.toGraph=function(n){function r(n,r){a.hasNode(n)||(a.addNode(n,s.get("node",{id:n})),void 0===a.node(n).label&&(a.node(n).label=n)),r&&e(r,a.node(n))}function l(n,r,l){var t=n+"-"+r,u=c[t];u||(u=c[t]=0),c[t]++;var o=l.id||t+"-"+u,i={};e(s.get("edge",l),i),e({id:o},i),a.addEdge(o,n,r,i)}function t(n){var e,r={},l=[];for(l.push(n);0!=l.length;)switch(e=l.pop(),e.type){case"node":r[e.id]=!0;break;case"edge":e.elems.forEach(function(n){l.push(n)});break;case"subgraph":e.stmts.forEach(function(n){l.push(n)})}return dagre.util.keys(r)}function u(n){var e=n.attrs;switch(n.type){case"node":r(n.id,e);break;case"edge":var o,a;n.elems.forEach(function(n){switch(u(n),n.type){case"node":a=[n.id];break;case"subgraph":a=t(n);break;default:throw Error("Unsupported type incident on edge: "+n.type)}o&&o.forEach(function(n){a.forEach(function(r){l(n,r,e),i&&l(r,n,e)})}),o=a});break;case"subgraph":s.enterSubGraph(),n.stmts.forEach(function(n){u(n)}),s.exitSubGraph();break;case"attr":s.set(n.attrType,e);break;default:throw Error("Unsupported statement type: "+n.type)}}var o=dot_parser.parse(n),a=dagre.graph(),i="graph"===o.type,c={},s={_default:{},get:function(n,r){if(this._default[n]!==void 0){var l={};return e(this._default[n],l),e(r,l),l}return r},set:function(n,e){this._default[n]=this.get(n,e)},enterSubGraph:function(){function n(){}n.prototype=this._default;var e=new n;this._default=e},exitSubGraph:function(){this._default=Object.getPrototypeOf(this._default)}};return o.stmts&&o.stmts.forEach(function(n){u(n)}),a},dagre.dot.toObjects=function(n){var e=dagre.dot.toGraph(n),r=e.nodes().map(function(n){return e.node(n)}),l=e.edges().map(function(n){var r=e.edge(n);return r.source=e.node(e.source(n)),r.target=e.node(e.target(n)),r});return{nodes:r,edges:l}},dot_parser=function(){function n(n){return'"'+n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,r){function l(n){$>j||(j>$&&($=j,z=[]),z.push(n))}function t(){var n,r,t,o,a,i,c,s,f,d,h,g,p,v,m,b;for(v=j,m=j,n=[],r=O();null!==r;)n.push(r),r=O();if(null!==n)if(b=j,r=L(),null!==r?(t=O(),null!==t?r=[r,t]:(r=null,j=b)):(r=null,j=b),r=null!==r?r:"",null!==r)if(t=C(),null!==t){for(o=[],a=O();null!==a;)o.push(a),a=O();if(null!==o)if(a=x(),a=null!==a?a:"",null!==a){for(i=[],c=O();null!==c;)i.push(c),c=O();if(null!==i)if(123===e.charCodeAt(j)?(c="{",j++):(c=null,0===P&&l('"{"')),null!==c){for(s=[],f=O();null!==f;)s.push(f),f=O();if(null!==s)if(f=u(),f=null!==f?f:"",null!==f){for(d=[],h=O();null!==h;)d.push(h),h=O();if(null!==d)if(125===e.charCodeAt(j)?(h="}",j++):(h=null,0===P&&l('"}"')),null!==h){for(g=[],p=O();null!==p;)g.push(p),p=O();null!==g?n=[n,r,t,o,a,i,c,s,f,d,h,g]:(n=null,j=m)}else n=null,j=m;else n=null,j=m}else n=null,j=m;else n=null,j=m}else n=null,j=m;else n=null,j=m}else n=null,j=m;else n=null,j=m}else n=null,j=m;else n=null,j=m;else n=null,j=m;return null!==n&&(n=function(n,e,r,l){return{type:e,id:r,stmts:l}}(v,n[2],n[4],n[8])),null===n&&(j=v),n}function u(){var n,r,t,u,a,i,c,s,f,d,h;if(f=j,d=j,n=o(),null!==n){for(r=[],t=O();null!==t;)r.push(t),t=O();if(null!==r)if(59===e.charCodeAt(j)?(t=";",j++):(t=null,0===P&&l('";"')),t=null!==t?t:"",null!==t){for(u=[],h=j,a=[],i=O();null!==i;)a.push(i),i=O();if(null!==a)if(i=o(),null!==i){for(c=[],s=O();null!==s;)c.push(s),s=O();null!==c?(59===e.charCodeAt(j)?(s=";",j++):(s=null,0===P&&l('";"')),s=null!==s?s:"",null!==s?a=[a,i,c,s]:(a=null,j=h)):(a=null,j=h)}else a=null,j=h;else a=null,j=h;for(;null!==a;){for(u.push(a),h=j,a=[],i=O();null!==i;)a.push(i),i=O();if(null!==a)if(i=o(),null!==i){for(c=[],s=O();null!==s;)c.push(s),s=O();null!==c?(59===e.charCodeAt(j)?(s=";",j++):(s=null,0===P&&l('";"')),s=null!==s?s:"",null!==s?a=[a,i,c,s]:(a=null,j=h)):(a=null,j=h)}else a=null,j=h;else a=null,j=h}null!==u?n=[n,r,t,u]:(n=null,j=d)}else n=null,j=d;else n=null,j=d}else n=null,j=d;return null!==n&&(n=function(n,e,r){for(var l=[e],t=0;r.length>t;++t)l.push(r[t][1]);return l}(f,n[0],n[3])),null===n&&(j=f),n}function o(){var n;return n=a(),null===n&&(n=s(),null===n&&(n=f(),null===n&&(n=i(),null===n&&(n=c())))),n}function a(){var n,e,r,l,t;if(l=j,t=j,n=k(),null===n&&(n=w(),null===n&&(n=A())),null!==n){for(e=[],r=O();null!==r;)e.push(r),r=O();null!==e?(r=d(),null!==r?n=[n,e,r]:(n=null,j=t)):(n=null,j=t)}else n=null,j=t;return null!==n&&(n=function(n,e,r){return{type:"attr",attrType:e,attrs:r||{}}}(l,n[0],n[2])),null===n&&(j=l),n}function i(){var n,r,t,u,o,a,i;if(a=j,i=j,n=x(),null!==n){for(r=[],t=O();null!==t;)r.push(t),t=O();if(null!==r)if(61===e.charCodeAt(j)?(t="=",j++):(t=null,0===P&&l('"="')),null!==t){for(u=[],o=O();null!==o;)u.push(o),o=O();null!==u?(o=x(),null!==o?n=[n,r,t,u,o]:(n=null,j=i)):(n=null,j=i)}else n=null,j=i;else n=null,j=i}else n=null,j=i;return null!==n&&(n=function(n,e,r){var l={};return l[e]=r,{type:"inlineAttr",attrs:l}}(a,n[0],n[4])),null===n&&(j=a),n}function c(){var n,e,r,l,t;if(l=j,t=j,n=b(),null!==n){for(e=[],r=O();null!==r;)e.push(r),r=O();null!==e?(r=d(),r=null!==r?r:"",null!==r?n=[n,e,r]:(n=null,j=t)):(n=null,j=t)}else n=null,j=t;return null!==n&&(n=function(n,e,r){return{type:"node",id:e,attrs:r||{}}}(l,n[0],n[2])),null===n&&(j=l),n}function s(){var n,e,r,l,t,u,o;if(u=j,o=j,n=m(),null!==n){for(e=[],r=O();null!==r;)e.push(r),r=O();if(null!==e)if(r=p(),null!==r){for(l=[],t=O();null!==t;)l.push(t),t=O();null!==l?(t=d(),t=null!==t?t:"",null!==t?n=[n,e,r,l,t]:(n=null,j=o)):(n=null,j=o)}else n=null,j=o;else n=null,j=o}else n=null,j=o;return null!==n&&(n=function(n,e,r,l){for(var t=[e],u=0;r.length>u;++u)t.push(r[u]);return{type:"edge",elems:t,attrs:l||{}}}(u,n[0],n[2],n[4])),null===n&&(j=u),n}function f(){var n,r,t,o,a,i,c,s,f,d;if(c=j,s=j,f=j,n=S(),null!==n){for(r=[],t=O();null!==t;)r.push(t),t=O();if(null!==r){if(d=j,t=x(),null!==t){for(o=[],a=O();null!==a;)o.push(a),a=O();null!==o?t=[t,o]:(t=null,j=d)}else t=null,j=d;t=null!==t?t:"",null!==t?n=[n,r,t]:(n=null,j=f)}else n=null,j=f}else n=null,j=f;if(n=null!==n?n:"",null!==n)if(123===e.charCodeAt(j)?(r="{",j++):(r=null,0===P&&l('"{"')),null!==r){for(t=[],o=O();null!==o;)t.push(o),o=O();if(null!==t)if(o=u(),null!==o){for(a=[],i=O();null!==i;)a.push(i),i=O();null!==a?(125===e.charCodeAt(j)?(i="}",j++):(i=null,0===P&&l('"}"')),null!==i?n=[n,r,t,o,a,i]:(n=null,j=s)):(n=null,j=s)}else n=null,j=s;else n=null,j=s}else n=null,j=s;else n=null,j=s;return null!==n&&(n=function(n,e,r){return e=e[2]||[],{type:"subgraph",id:e[0],stmts:r}}(c,n[0],n[3])),null===n&&(j=c),n}function d(){var n,e,r,l,t,u,o;if(t=j,u=j,n=h(),null!==n){for(e=[],o=j,r=[],l=O();null!==l;)r.push(l),l=O();for(null!==r?(l=h(),null!==l?r=[r,l]:(r=null,j=o)):(r=null,j=o);null!==r;){for(e.push(r),o=j,r=[],l=O();null!==l;)r.push(l),l=O();null!==r?(l=h(),null!==l?r=[r,l]:(r=null,j=o)):(r=null,j=o)}null!==e?n=[n,e]:(n=null,j=u)}else n=null,j=u;return null!==n&&(n=function(n,e,r){for(var l=e,t=0;r.length>t;++t)l=D(l,r[t][1]);return l}(t,n[0],n[1])),null===n&&(j=t),n}function h(){var n,r,t,u,o,a,i;if(a=j,i=j,91===e.charCodeAt(j)?(n="[",j++):(n=null,0===P&&l('"["')),null!==n){for(r=[],t=O();null!==t;)r.push(t),t=O();if(null!==r)if(t=g(),t=null!==t?t:"",null!==t){for(u=[],o=O();null!==o;)u.push(o),o=O();null!==u?(93===e.charCodeAt(j)?(o="]",j++):(o=null,0===P&&l('"]"')),null!==o?n=[n,r,t,u,o]:(n=null,j=i)):(n=null,j=i)}else n=null,j=i;else n=null,j=i}else n=null,j=i;return null!==n&&(n=function(n,e){return e}(a,n[2])),null===n&&(j=a),n}function g(){var n,r,t,u,o,a,i,c,s;if(i=j,c=j,n=v(),null!==n){for(r=[],s=j,t=[],u=O();null!==u;)t.push(u),u=O();if(null!==t)if(44===e.charCodeAt(j)?(u=",",j++):(u=null,0===P&&l('","')),u=null!==u?u:"",null!==u){for(o=[],a=O();null!==a;)o.push(a),a=O();null!==o?(a=v(),null!==a?t=[t,u,o,a]:(t=null,j=s)):(t=null,j=s)}else t=null,j=s;else t=null,j=s;for(;null!==t;){for(r.push(t),s=j,t=[],u=O();null!==u;)t.push(u),u=O();if(null!==t)if(44===e.charCodeAt(j)?(u=",",j++):(u=null,0===P&&l('","')),u=null!==u?u:"",null!==u){for(o=[],a=O();null!==a;)o.push(a),a=O();null!==o?(a=v(),null!==a?t=[t,u,o,a]:(t=null,j=s)):(t=null,j=s)}else t=null,j=s;else t=null,j=s}null!==r?n=[n,r]:(n=null,j=c)}else n=null,j=c;return null!==n&&(n=function(n,e,r){for(var l=e,t=0;r.length>t;++t)l=D(l,r[t][3]);return l}(i,n[0],n[1])),null===n&&(j=i),n}function p(){var n,r,t,u,o,a,i,c;if(a=j,i=j,c=j,"--"===e.substr(j,2)?(n="--",j+=2):(n=null,0===P&&l('"--"')),null!==n?(r=function(){return B}(j)?null:"",null!==r?n=[n,r]:(n=null,j=c)):(n=null,j=c),null===n&&(c=j,"->"===e.substr(j,2)?(n="->",j+=2):(n=null,0===P&&l('"->"')),null!==n?(r=function(){return B}(j)?"":null,null!==r?n=[n,r]:(n=null,j=c)):(n=null,j=c)),null!==n){for(r=[],t=O();null!==t;)r.push(t),t=O();if(null!==r)if(t=m(),null!==t){for(u=[],o=O();null!==o;)u.push(o),o=O();null!==u?(o=p(),o=null!==o?o:"",null!==o?n=[n,r,t,u,o]:(n=null,j=i)):(n=null,j=i)}else n=null,j=i;else n=null,j=i}else n=null,j=i;return null!==n&&(n=function(n,e,r){for(var l=[e],t=0;r.length>t;++t)l.push(r[t]);return l}(a,n[2],n[4])),null===n&&(j=a),n}function v(){var n,r,t,u,o,a,i,c;if(a=j,i=j,n=x(),null!==n){for(c=j,r=[],t=O();null!==t;)r.push(t),t=O();if(null!==r)if(61===e.charCodeAt(j)?(t="=",j++):(t=null,0===P&&l('"="')),null!==t){for(u=[],o=O();null!==o;)u.push(o),o=O();null!==u?(o=x(),null!==o?r=[r,t,u,o]:(r=null,j=c)):(r=null,j=c)}else r=null,j=c;else r=null,j=c;r=null!==r?r:"",null!==r?n=[n,r]:(n=null,j=i)}else n=null,j=i;return null!==n&&(n=function(n,e,r){var l={};return l[e]=r[3],l}(a,n[0],n[1])),null===n&&(j=a),n}function m(){var n,e;return n=f(),null===n&&(e=j,n=b(),null!==n&&(n=function(n,e){return{type:"node",id:e,attrs:{}}}(e,n)),null===n&&(j=e)),n}function b(){var n,e,r,l,t;if(l=j,t=j,n=x(),null!==n){for(e=[],r=O();null!==r;)e.push(r),r=O();null!==e?(r=y(),r=null!==r?r:"",null!==r?n=[n,e,r]:(n=null,j=t)):(n=null,j=t)}else n=null,j=t;return null!==n&&(n=function(n,e){return e}(l,n[0])),null===n&&(j=l),n}function y(){var n,r,t,u,o,a,i,c,s;if(c=j,58===e.charCodeAt(j)?(n=":",j++):(n=null,0===P&&l('":"')),null!==n){for(r=[],t=O();null!==t;)r.push(t),t=O();if(null!==r)if(t=x(),null!==t){for(u=[],o=O();null!==o;)u.push(o),o=O();if(null!==u){if(s=j,58===e.charCodeAt(j)?(o=":",j++):(o=null,0===P&&l('":"')),null!==o){for(a=[],i=O();null!==i;)a.push(i),i=O();null!==a?(i=E(),null!==i?o=[o,a,i]:(o=null,j=s)):(o=null,j=s)}else o=null,j=s;o=null!==o?o:"",null!==o?n=[n,r,t,u,o]:(n=null,j=c)}else n=null,j=c}else n=null,j=c;else n=null,j=c}else n=null,j=c;return n}function E(){var n;return 110===e.charCodeAt(j)?(n="n",j++):(n=null,0===P&&l('"n"')),null===n&&("ne"===e.substr(j,2)?(n="ne",j+=2):(n=null,0===P&&l('"ne"')),null===n&&(101===e.charCodeAt(j)?(n="e",j++):(n=null,0===P&&l('"e"')),null===n&&("se"===e.substr(j,2)?(n="se",j+=2):(n=null,0===P&&l('"se"')),null===n&&(115===e.charCodeAt(j)?(n="s",j++):(n=null,0===P&&l('"s"')),null===n&&("sw"===e.substr(j,2)?(n="sw",j+=2):(n=null,0===P&&l('"sw"')),null===n&&(119===e.charCodeAt(j)?(n="w",j++):(n=null,0===P&&l('"w"')),null===n&&("nw"===e.substr(j,2)?(n="nw",j+=2):(n=null,0===P&&l('"nw"')),null===n&&(99===e.charCodeAt(j)?(n="c",j++):(n=null,0===P&&l('"c"')),null===n&&(95===e.charCodeAt(j)?(n="_",j++):(n=null,0===P&&l('"_"'))))))))))),n}function x(){var n,r,t,u,o,a,i,c,s;if(P++,a=j,i=j,/^[a-zA-Z\u0200-\u0377_]/.test(e.charAt(j))?(n=e.charAt(j),j++):(n=null,0===P&&l("[a-zA-Z\\u0200-\\u0377_]")),null!==n){for(r=[],/^[a-zA-Z\u0200-\u0377_0-9]/.test(e.charAt(j))?(t=e.charAt(j),j++):(t=null,0===P&&l("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==t;)r.push(t),/^[a-zA-Z\u0200-\u0377_0-9]/.test(e.charAt(j))?(t=e.charAt(j),j++):(t=null,0===P&&l("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==r?n=[n,r]:(n=null,j=i)}else n=null,j=i;if(null!==n&&(n=function(n,e,r){return e+r.join("")}(a,n[0],n[1])),null===n&&(j=a),null===n){if(a=j,i=j,45===e.charCodeAt(j)?(n="-",j++):(n=null,0===P&&l('"-"')),n=null!==n?n:"",null!==n)if(46===e.charCodeAt(j)?(r=".",j++):(r=null,0===P&&l('"."')),null!==r){if(/^[0-9]/.test(e.charAt(j))?(u=e.charAt(j),j++):(u=null,0===P&&l("[0-9]")),null!==u)for(t=[];null!==u;)t.push(u),/^[0-9]/.test(e.charAt(j))?(u=e.charAt(j),j++):(u=null,0===P&&l("[0-9]"));else t=null;null!==t?n=[n,r,t]:(n=null,j=i)}else n=null,j=i;else n=null,j=i;if(null!==n&&(n=function(n,e,r,l){return e+r+l.join("")}(a,n[0],n[1],n[2])),null===n&&(j=a),null===n){if(a=j,i=j,45===e.charCodeAt(j)?(n="-",j++):(n=null,0===P&&l('"-"')),n=null!==n?n:"",null!==n){if(/^[0-9]/.test(e.charAt(j))?(t=e.charAt(j),j++):(t=null,0===P&&l("[0-9]")),null!==t)for(r=[];null!==t;)r.push(t),/^[0-9]/.test(e.charAt(j))?(t=e.charAt(j),j++):(t=null,0===P&&l("[0-9]"));else r=null;if(null!==r){if(c=j,46===e.charCodeAt(j)?(t=".",j++):(t=null,0===P&&l('"."')),null!==t){for(u=[],/^[0-9]/.test(e.charAt(j))?(o=e.charAt(j),j++):(o=null,0===P&&l("[0-9]"));null!==o;)u.push(o),/^[0-9]/.test(e.charAt(j))?(o=e.charAt(j),j++):(o=null,0===P&&l("[0-9]"));null!==u?t=[t,u]:(t=null,j=c)}else t=null,j=c;t=null!==t?t:"",null!==t?n=[n,r,t]:(n=null,j=i)}else n=null,j=i}else n=null,j=i;if(null!==n&&(n=function(n,e,r,l){return e+r.join("")+(l[0]||"")+(l[1]||[]).join("")}(a,n[0],n[1],n[2])),null===n&&(j=a),null===n){if(a=j,i=j,34===e.charCodeAt(j)?(n='"',j++):(n=null,0===P&&l('"\\""')),null!==n){for(r=[],c=j,'\\"'===e.substr(j,2)?(t='\\"',j+=2):(t=null,0===P&&l('"\\\\\\""')),null!==t&&(t=function(){return'"'}(c)),null===t&&(j=c),null===t&&(c=j,s=j,92===e.charCodeAt(j)?(t="\\",j++):(t=null,0===P&&l('"\\\\"')),null!==t?(/^[^"]/.test(e.charAt(j))?(u=e.charAt(j),j++):(u=null,0===P&&l('[^"]')),null!==u?t=[t,u]:(t=null,j=s)):(t=null,j=s),null!==t&&(t=function(n,e){return"\\"+e}(c,t[1])),null===t&&(j=c),null===t&&(/^[^"]/.test(e.charAt(j))?(t=e.charAt(j),j++):(t=null,0===P&&l('[^"]'))));null!==t;)r.push(t),c=j,'\\"'===e.substr(j,2)?(t='\\"',j+=2):(t=null,0===P&&l('"\\\\\\""')),null!==t&&(t=function(){return'"'}(c)),null===t&&(j=c),null===t&&(c=j,s=j,92===e.charCodeAt(j)?(t="\\",j++):(t=null,0===P&&l('"\\\\"')),null!==t?(/^[^"]/.test(e.charAt(j))?(u=e.charAt(j),j++):(u=null,0===P&&l('[^"]')),null!==u?t=[t,u]:(t=null,j=s)):(t=null,j=s),null!==t&&(t=function(n,e){return"\\"+e}(c,t[1])),null===t&&(j=c),null===t&&(/^[^"]/.test(e.charAt(j))?(t=e.charAt(j),j++):(t=null,0===P&&l('[^"]'))));null!==r?(34===e.charCodeAt(j)?(t='"',j++):(t=null,0===P&&l('"\\""')),null!==t?n=[n,r,t]:(n=null,j=i)):(n=null,j=i)}else n=null,j=i;null!==n&&(n=function(n,e){return e.join("")}(a,n[1])),null===n&&(j=a)}}}return P--,0===P&&null===n&&l("identifier"),n}function w(){var n,r;return r=j,"node"===e.substr(j,4).toLowerCase()?(n=e.substr(j,4),j+=4):(n=null,0===P&&l('"node"')),null!==n&&(n=function(n,e){return e.toLowerCase()}(r,n)),null===n&&(j=r),n}function A(){var n,r;return r=j,"edge"===e.substr(j,4).toLowerCase()?(n=e.substr(j,4),j+=4):(n=null,0===P&&l('"edge"')),null!==n&&(n=function(n,e){return e.toLowerCase()}(r,n)),null===n&&(j=r),n}function k(){var n,r;return r=j,"graph"===e.substr(j,5).toLowerCase()?(n=e.substr(j,5),j+=5):(n=null,0===P&&l('"graph"')),null!==n&&(n=function(n,e){return e.toLowerCase()}(r,n)),null===n&&(j=r),n}function N(){var n,r;return r=j,"digraph"===e.substr(j,7).toLowerCase()?(n=e.substr(j,7),j+=7):(n=null,0===P&&l('"digraph"')),null!==n&&(n=function(n,e){return e.toLowerCase()}(r,n)),null===n&&(j=r),n}function S(){var n,r;return r=j,"subgraph"===e.substr(j,8).toLowerCase()?(n=e.substr(j,8),j+=8):(n=null,0===P&&l('"subgraph"')),null!==n&&(n=function(n,e){return e.toLowerCase()}(r,n)),null===n&&(j=r),n}function L(){var n,r;return r=j,"strict"===e.substr(j,6).toLowerCase()?(n=e.substr(j,6),j+=6):(n=null,0===P&&l('"strict"')),null!==n&&(n=function(n,e){return e.toLowerCase()}(r,n)),null===n&&(j=r),n}function C(){var n,e;return n=k(),null===n&&(e=j,n=N(),null!==n&&(n=function(n,e){return B="digraph"===e,e}(e,n)),null===n&&(j=e)),n}function T(){var n,r;if(P++,/^[ \t\r\n]/.test(e.charAt(j))?(r=e.charAt(j),j++):(r=null,0===P&&l("[ \\t\\r\\n]")),null!==r)for(n=[];null!==r;)n.push(r),/^[ \t\r\n]/.test(e.charAt(j))?(r=e.charAt(j),j++):(r=null,0===P&&l("[ \\t\\r\\n]"));else n=null;return P--,0===P&&null===n&&l("whitespace"),n}function _(){var n,r,t,u,o,a,i;if(P++,o=j,"//"===e.substr(j,2)?(n="//",j+=2):(n=null,0===P&&l('"//"')),null!==n){for(r=[],/^[^\n]/.test(e.charAt(j))?(t=e.charAt(j),j++):(t=null,0===P&&l("[^\\n]"));null!==t;)r.push(t),/^[^\n]/.test(e.charAt(j))?(t=e.charAt(j),j++):(t=null,0===P&&l("[^\\n]"));null!==r?n=[n,r]:(n=null,j=o)}else n=null,j=o;
if(null===n)if(o=j,"/*"===e.substr(j,2)?(n="/*",j+=2):(n=null,0===P&&l('"/*"')),null!==n){for(r=[],a=j,i=j,P++,"*/"===e.substr(j,2)?(t="*/",j+=2):(t=null,0===P&&l('"*/"')),P--,null===t?t="":(t=null,j=i),null!==t?(e.length>j?(u=e.charAt(j),j++):(u=null,0===P&&l("any character")),null!==u?t=[t,u]:(t=null,j=a)):(t=null,j=a);null!==t;)r.push(t),a=j,i=j,P++,"*/"===e.substr(j,2)?(t="*/",j+=2):(t=null,0===P&&l('"*/"')),P--,null===t?t="":(t=null,j=i),null!==t?(e.length>j?(u=e.charAt(j),j++):(u=null,0===P&&l("any character")),null!==u?t=[t,u]:(t=null,j=a)):(t=null,j=a);null!==r?("*/"===e.substr(j,2)?(t="*/",j+=2):(t=null,0===P&&l('"*/"')),null!==t?n=[n,r,t]:(n=null,j=o)):(n=null,j=o)}else n=null,j=o;return P--,0===P&&null===n&&l("comment"),n}function O(){var n;return n=T(),null===n&&(n=_()),n}function I(n){n.sort();for(var e=null,r=[],l=0;n.length>l;l++)n[l]!==e&&(r.push(n[l]),e=n[l]);return r}function M(){for(var n=1,r=1,l=!1,t=0;Math.max(j,$)>t;t++){var u=e.charAt(t);"\n"===u?(l||n++,r=1,l=!1):"\r"===u||"\u2028"===u||"\u2029"===u?(n++,r=1,l=!0):(r++,l=!1)}return{line:n,column:r}}function D(n,e){var r={};for(var l in n)r[l]=n[l];for(var l in e)r[l]=e[l];return r}var R={start:t,stmtList:u,stmt:o,attrStmt:a,inlineAttrStmt:i,nodeStmt:c,edgeStmt:s,subgraphStmt:f,attrList:d,attrListBlock:h,aList:g,edgeRHS:p,idDef:v,nodeIdOrSubgraph:m,nodeId:b,port:y,compassPt:E,id:x,node:w,edge:A,graph:k,digraph:N,subgraph:S,strict:L,graphType:C,whitespace:T,comment:_,_:O};if(void 0!==r){if(void 0===R[r])throw Error("Invalid rule name: "+n(r)+".")}else r="start";var B,j=0,P=0,$=0,z=[],F=R[r]();if(null===F||j!==e.length){var J=Math.max(j,$),G=e.length>J?e.charAt(J):null,V=M();throw new this.SyntaxError(I(z),G,J,V.line,V.column)}return F},toSource:function(){return this._source}};return e.SyntaxError=function(e,r,l,t,u){function o(e,r){var l,t;switch(e.length){case 0:l="end of input";break;case 1:l=e[0];break;default:l=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return t=r?n(r):"end of input","Expected "+l+" but "+t+" found."}this.name="SyntaxError",this.expected=e,this.found=r,this.message=o(e,r),this.offset=l,this.line=t,this.column=u},e.SyntaxError.prototype=Error.prototype,e}()}();var nexo=nexo||{};nexo.NexoTerm=Backbone.Model.extend({defaults:{name:"unknown",description:"-",robustness:0},idAttribute:"_id",toJSON:function(){return{_id:1,name:"test"}}}),$(function(){"use strict";var n=location.href,e=n.split("/"),r=e[e.length-1];console.log("Target ID = "+r),$.getJSON("/nexo/"+r,function(n){console.log("Result: \n"+JSON.stringify(n)),console.log("len: \n"+n.length),$("#summary-tab").append("<h3>"+n.name+"</h3>"),$("#summary-tab").append("<table id='summary-table' class='table table-striped'></table>"),$("#summary-table").append("<tr><td>Name</td><td>"+n["term name"]+"</td></tr>"),$("#summary-table").append("<tr><td>DEF</td><td>"+n.def+"</td></tr>"),$("#summary-table").append("<tr><td>Score</td><td>"+n.comment+"</td></tr>")})}),function(){function n(n){var e=n.dagre.points.slice(0),r=dagre.util.intersectRect(n.source.dagre,e[0]),l=dagre.util.intersectRect(n.target.dagre,e[e.length-1]);return e.unshift(r),e.push(l),d3.svg.line().x(function(n){return n.x}).y(function(n){return n.y}).interpolate("linear")(e)}function e(n,e,r){n.dagre.points.forEach(function(n){n.x=Math.max(0,Math.min(svgBBox.width,n.x+e)),n.y=Math.max(0,Math.min(svgBBox.height,n.y+r))})}function r(){var r={};u.forEach(function(n){var e=r[n.source],l=r[n.target];e||(e=r[n.source]={label:n.source,edges:[]}),l||(l=r[n.target]={label:n.target,edges:[]}),e.edges.push(n),l.edges.push(n)});var o=d3.values(r);u.forEach(function(n){n.source=r[n.source],n.target=r[n.target]});var a=d3.select("svg"),i=a.append("g").attr("transform","translate(5, 5)"),c=d3.behavior.zoom().scale(1).on("zoom",function(){var n=d3.event.translate,e=d3.event.scale;i.attr("transform","translate("+n+") scale("+e+")")});a.call(c);var s=i.selectAll("g .node").data(o).enter().append("g").attr("class","node").attr("id",function(n){return"node-"+n.label}),f=i.selectAll("path .edge").data(u).enter().append("path").attr("class","edge").attr("marker-end","url(#arrowhead)"),d=s.append("rect"),h=s.append("text").attr("text-anchor","middle").attr("x",0);h.append("tspan").attr("x",0).attr("dy","1em").text(function(n){return n.label}),h.each(function(n){var e=this.getBBox();n.bbox=e,n.width=e.width+2*l,n.height=e.height+2*l,n.rx=t,n.ry=t}),d.attr("x",function(n){return-(n.bbox.width/2+l)}).attr("y",function(n){return-(n.bbox.height/2+l)}).attr("rx",function(n){return n.rx}).attr("ry",function(n){return n.ry}).attr("width",function(n){return n.width}).attr("height",function(n){return n.height}),h.attr("x",function(n){return-n.bbox.width/2}).attr("y",function(n){return-n.bbox.height/2}),dagre.layout().nodeSep(50).edgeSep(10).rankSep(50).nodes(o).edges(u).debugLevel(1).run(),s.attr("transform",function(n){return"translate("+n.dagre.x+","+n.dagre.y+")"}),f.each(function(n){var e=n.dagre.points;if(!e.length){var r=n.source.dagre,l=n.target.dagre;e.push({x:(r.x+l.x)/2,y:(r.y+l.y)/2})}1===e.length&&e.push({x:e[0].x,y:e[0].y})}),f.attr("id",function(n){return n.dagre.id}).attr("d",function(e){return n(e)});var g=a.node().getBBox();a.attr("width",520),a.attr("height",g.height+10);var p=d3.behavior.drag().origin(function(n){return n.pos?{x:n.pos.x,y:n.pos.y}:{x:n.dagre.x,y:n.dagre.y}}).on("drag",function(r){var l=r.dagre.x,t=r.dagre.y;r.dagre.x=Math.max(r.width/2,Math.min(g.width-r.width/2,d3.event.x)),r.dagre.y=Math.max(r.height/2,Math.min(g.height-r.height/2,d3.event.y)),d3.select(this).attr("transform","translate("+r.dagre.x+","+r.dagre.y+")");var u=r.dagre.x-l,o=r.dagre.y-t;r.edges.forEach(function(r){e(r,u,o),d3.select("#"+r.dagre.id).attr("d",n(r))})}),v=d3.behavior.drag().on("drag",function(r){e(r,d3.event.dx,d3.event.dy),d3.select(this).attr("d",n(r))});s.call(p),f.call(v)}var l=10,t=10,u=[],o=$("title").text(),a=o.split(" "),i=a[a.length-1],c="NeXO:"+i;console.log("#### Target ID = "+i),console.log("#### Target ID STR = "+c),$.getJSON("/nexo/"+i+"/path.json",function(n){console.log("PATH Result: \n"+JSON.stringify(n));var e=n.elements.edges,l=e.length;u=[];for(var t=0;l>t;t++){var o=e[t].data.source,a=e[t].data.target,i={source:o,target:a};u.push(i)}r()})}(),this.JST=this.JST||{};var nexo=nexo||{};nexo.NexoTermView=Backbone.View.extend({tagName:"div",className:"termContainer",template:$("#termTemplate").html(),events:{},render:function(){var n=_.template(this.template);return this.$el.html(n(this.model.toJSON())),this}});var nexo=nexo||{};nexo.NexoTermListView=Backbone.View.extend({el:$("#terms"),initialize:function(){this.collection=new nexo.NexoTermList,this.collection.fetch(),this.render(),this.listenTo(this.collection,"show",this.renderTerm),this.listenTo(this.collection,"reset",this.render)},events:{"click #search":"showTerms"},showTerms:function(n){n.preventDefault();var e={};$("#search div").children("input").each(function(){console.log("Renderer called!")}),this.collection.create(e)},render:function(){this.collection.each(function(n){this.renderTerm(n)},this)},renderTerm:function(n){var e=new nexo.NexoTermView({model:n});this.$el.append(e.render().el)}});
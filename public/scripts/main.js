var nexo=nexo||{};nexo.NexoTermList=Backbone.Collection.extend({model:nexo.NexoTerm,url:"http://localhost:8182/graphs/neo4jnexo/vertices?key=name&value=NeXO:8888"}),function(){function t(t){var e={};return t.forEach(function(t,n){e[t]=n}),e}function e(t,e){Object.keys(t).forEach(function(n){e[n]=t[n]})}function n(t){return Math.min.apply(null,t)}function i(t){return Math.max.apply(null,t)}function r(t){return Array.prototype.concat.apply([],t)}function o(t){return Object.keys(t).map(function(e){return t[e]})}function s(t){for(var e={},n=0;t.length>n;++n)for(var i=t[n],r=0;i.length>r;++r){var o=i[r];e[o]=o}var s=[];for(var a in e)s.push(e[a]);return s}function a(t,e,n,i){return function(r){return arguments.length?(e[n]=r,i&&i(r),t):e[n]}}function u(){function t(e){var i=h,r=2*e,o=r+1,s=e;i.length>r&&(s=i[r].pri<i[s].pri?r:s,i.length>o&&(s=i[o].pri<i[s].pri?o:s),s!==e&&(n(e,s),t(s)))}function e(t){for(var e,i=h,r=i[t].pri;t>0&&(e=t>>1,!(r>i[e].pri));)n(t,e),t=e}function n(t,e){var n=h,i=f,r=n[t];n[t]=n[e],n[e]=r,i[n[t].key]=t,i[n[e].key]=e}function i(){return h.length}function r(){return Object.keys(f)}function o(t){return t in f}function s(t){var e=f[t];return void 0!==e?h[e].pri:void 0}function a(t,n){if(t in f)return!1;var i={key:t,pri:n},r=h.length;return f[t]=r,h.push(i),e(r),!0}function u(){return i()>0?h[0].key:void 0}function l(){n(0,h.length-1);var e=h.pop();return delete f[e.key],t(0),e.key}function c(t,n){var i=f[t];if(n>h[i].pri)throw Error("New priority is greater than current priority. Key: "+t+" Old: "+h[i].pri+" New: "+n);h[i].pri=n,e(i)}var h=[],f={};return{size:i,keys:r,has:o,priority:s,add:a,min:u,removeMin:l,decrease:c}}dagre={},dagre.version="0.0.6",dagre.graph={},dagre.graph=function(){function t(t,e,n){var i=t[e];i||(i=t[e]={count:0,edges:{}}),i.count++,i.edges[n]=!0}function e(t,e,n){var i=t[e];0==--i.count?delete t[e]:delete i.edges[n]}function n(t){var e=a[t];if(t in a)return e;throw Error("Node '"+t+"' is not in graph:\n"+(""+f))}function i(t){var e=c[t];if(!e)throw Error("Edge '"+t+"' is not in graph:\n"+(""+f));return e}var a={},u={},l={},c={},f={},d=0;return f.addNode=function(t,e){if(f.hasNode(t))throw Error("Graph already has node '"+t+"':\n"+(""+f));a[t]={id:t,value:e},u[t]={},l[t]={}},f.delNode=function(t){n(t),f.edges(t).forEach(function(t){f.delEdge(t)}),delete u[t],delete l[t],delete a[t]},f.node=function(t){return n(t).value},f.hasNode=function(t){return t in a},f.addEdge=function(e,i,r,o){if(n(i),n(r),null===e)e="_ANON-"+ ++d;else if(f.hasEdge(e))throw Error("Graph already has edge '"+e+"':\n"+(""+f));c[e]={id:e,source:i,target:r,value:o},t(u[r],i,e),t(l[i],r,e)},f.delEdge=function(t){var n=i(t);e(u[n.target],n.source,t),e(l[n.source],n.target,t),delete c[t]},f.edge=function(t){return i(t).value},f.source=function(t){return i(t).source},f.target=function(t){return i(t).target},f.hasEdge=function(t){return t in c},f.successors=function(t){return n(t),h(l[t]).map(function(t){return a[t].id})},f.predecessors=function(t){return n(t),h(u[t]).map(function(t){return a[t].id})},f.neighbors=function(t){n(t);var e={};return h(l[t]).map(function(t){e[t]=!0}),h(u[t]).map(function(t){e[t]=!0}),h(e).map(function(t){return a[t].id})},f.nodes=function(){var t=[];return f.eachNode(function(e){t.push(e)}),t},f.eachNode=function(t){for(var e in a){var n=a[e];t(n.id,n.value)}},f.edges=function(t,e){var i,r;return arguments.length?1===arguments.length?s([f.inEdges(t),f.outEdges(t)]):2===arguments.length?(n(t),n(e),r=l[t],i=e in r?h(r[e].edges):[],i.map(function(t){return c[t].id})):void 0:(i=[],f.eachEdge(function(t){i.push(t)}),i)},f.eachEdge=function(t){for(var e in c){var n=c[e];t(n.id,n.source,n.target,n.value)}},f.inEdges=function(t){return n(t),r(o(u[t]).map(function(t){return h(t.edges)}))},f.outEdges=function(t){return n(t),r(o(l[t]).map(function(t){return h(t.edges)}))},f.subgraph=function(t){var e=dagre.graph();return t.forEach(function(t){e.addNode(t,f.node(t))}),o(c).forEach(function(t){e.hasNode(t.source)&&e.hasNode(t.target)&&e.addEdge(t.id,t.source,t.target,f.edge(t.id))}),e},f.toString=function(){var t="GRAPH:\n";return t+="    Nodes:\n",h(a).forEach(function(e){t+="        "+e+": "+JSON.stringify(a[e].value)+"\n"}),t+="    Edges:\n",h(c).forEach(function(e){var n=c[e];t+="        "+e+" ("+n.source+" -> "+n.target+"): "+JSON.stringify(c[e].value)+"\n"}),t},f},dagre.layout=function(){function t(){var t=dagre.graph(),e=0;return s.nodes.forEach(function(n){var i="id"in n?n.id:"_N"+e++;n.dagre={id:i,width:n.width,height:n.height},t.addNode(i,n.dagre)}),s.edges.forEach(function(n){var i=n.source.dagre.id;if(!t.hasNode(i))throw Error("Source node for '"+n+"' not in node list");var r=n.target.dagre.id;if(!t.hasNode(r))throw Error("Target node for '"+n+"' not in node list");if(n.dagre={points:[]},i!==r){var o="id"in n?n.id:"_E"+e++;n.dagre.id=o,n.dagre.minLen=n.minLen||1,n.dagre.width=n.width||0,n.dagre.height=n.height||0,t.addEdge(o,i,r,n.dagre)}}),t}function e(){var e=p.rankSep();try{if(!s.nodes.length)return;var o=t();o.eachEdge(function(t,e,n,i){i.minLen*=2}),p.rankSep(e/2),l.run(o),c.run(o),n(o),h.run(o),f.run(o),i(o),r(o),l.undo(o)}finally{p.rankSep(e)}return p}function n(t){var e=0;t.eachEdge(function(n,i,r,o){var s=t.node(i).rank,a=t.node(r).rank;if(a>s+1){for(var u=i,l=s+1,c=0;a>l;++l,++c){var h="_D"+ ++e,f={width:o.width,height:o.height,edge:{id:n,source:i,target:r,attrs:o},rank:l,dummy:!0};0===c?f.index=0:l+1===a&&(f.index=1),t.addNode(h,f),t.addEdge(null,u,h,{}),u=h}t.addEdge(null,u,r,{}),t.delEdge(n)}})}function i(t){t.eachNode(function(e,n){if(n.dummy&&"index"in n){var i=n.edge;t.hasEdge(i.id)||t.addEdge(i.id,i.source,i.target,i.attrs);var r=t.edge(i.id).points;r[n.index]={x:n.x,y:n.y,ul:n.ul,ur:n.ur,dl:n.dl,dr:n.dr},t.delNode(e)}})}function r(t){t.eachEdge(function(t,e,n,i){i.reversed&&i.points.reverse()})}function o(t){return function(){return arguments.length?(t.apply(null,arguments),p):t()}}var s={nodes:[],edges:[],debugLevel:0},u=d(),l=dagre.layout.acyclic(),c=dagre.layout.rank(),h=dagre.layout.order(),f=dagre.layout.position(),p={};return p.nodes=a(p,s,"nodes"),p.edges=a(p,s,"edges"),p.orderIters=o(h.iterations),p.nodeSep=o(f.nodeSep),p.edgeSep=o(f.edgeSep),p.universalSep=o(f.universalSep),p.rankSep=o(f.rankSep),p.rankDir=o(f.rankDir),p.debugAlignment=o(f.debugAlignment),p.debugLevel=a(p,s,"debugLevel",function(t){u.enabled(t),l.debugLevel(t),c.debugLevel(t),h.debugLevel(t),f.debugLevel(t)}),p.run=u.wrap("Total layout",e),p},dagre.layout.acyclic=function(){function t(t){function n(e){e in r||(r[e]=i[e]=!0,t.outEdges(e).forEach(function(r){var s,a=t.target(r);a in i?(s=t.edge(r),t.delEdge(r),s.reversed=!0,++o,t.addEdge(r,a,e,s)):n(a)}),delete i[e])}var i={},r={},o=0;t.eachNode(function(t){n(t)}),e.debugLevel>=2&&console.log("Acyclic Phase: reversed "+o+" edge(s)")}var e={debugLevel:0},n=d(),i={};return i.debugLevel=a(i,e,"debugLevel",function(t){n.enabled(t)}),i.run=n.wrap("Acyclic Phase",t),i.undo=function(t){t.eachEdge(function(e,n,i,r){r.reversed&&(delete r.reversed,t.delEdge(e),t.addEdge(e,i,n,r))})},i},dagre.layout.rank=function(){function t(t){e(t),f(t).forEach(function(e){var n=t.subgraph(e);i(n),r(n)})}function e(t){var e={},n=u();for(t.eachNode(function(i){n.add(i,t.inEdges(i).length),e[i]=0});n.size()>0;){var i=n.min();if(n.priority(i)>0)throw Error("Input graph is not acyclic: "+(""+t));n.removeMin();var r=e[i];t.node(i).rank=r,t.outEdges(i).forEach(function(i){var o=t.target(i);e[o]=Math.max(e[o],r+(t.edge(i).minLen||1)),n.decrease(o,n.priority(o)-1)})}}function i(t){function e(s,a){r[s]=!0,t.node(s).rank=a,i[s].forEach(function(i){if(!(i in r)){var u=n[o(s,i)];e(i,a+(t.edges(s,i).length?u:-u))}})}var n={};t.eachEdge(function(t,e,i,r){var s=o(e,i);n[s]=Math.max(n[s]||1,r.minLen||1)});var i=dagre.util.prim(t,function(e,i){return Math.abs(t.node(e).rank-t.node(i).rank)-n[o(e,i)]}),r={};return e(t.nodes()[0],0),i}function r(t){var e=n(t.nodes().map(function(e){return t.node(e).rank}));t.eachNode(function(t,n){n.rank-=e})}function o(t,e){return e>t?t.length+":"+t+"-"+e:e.length+":"+e+"-"+t}var s={debugLevel:0},l=d(),c={};return c.debugLevel=a(c,s,"debugLevel",function(t){l.enabled(t)}),c.run=l.wrap("Rank Phase",t),c},dagre.layout.order=function(){function e(t){var e=n(t),i=c(e),r=l(t,e);h.debugLevel>=2&&console.log("Order phase start cross count: "+r);var s,a,u;for(a=0,u=0;4>u&&h.iterations>a;++a,++u)s=o(t,a,e),r>s&&(i=c(e),r=s,u=0),h.debugLevel>=3&&console.log("Order phase iter "+a+" cross count: "+r);return i.forEach(function(e){e.forEach(function(e,n){t.node(e).order=n})}),h.debugLevel>=2&&(console.log("Order iterations: "+a),console.log("Order phase best cross count: "+r)),i}function n(t){var e=[];return t.eachNode(function(t,n){var i=e[n.rank]||(e[n.rank]=[]);i.push(t)}),e}function i(t){return function(e){var n=[];return t.inEdges(e).forEach(function(e){n.push(t.source(e))}),n}}function r(t){return function(e){var n=[];return t.outEdges(e).forEach(function(e){n.push(t.target(e))}),n}}function o(t,e,n){if(0===e%2)for(var o=1;n.length>o;++o)s(n[o-1],n[o],i(t));else for(var o=n.length-2;o>=0;--o)s(n[o+1],n[o],r(t));return l(t,n)}function s(e,n,i){var r=t(n),o=u(e,n,i),s=n.filter(function(t){return-1!==o[t]});s.sort(function(t,e){return o[t]-o[e]||r[t]-r[e]});for(var a=n.length-1;a>=0;--a)-1!==o[n[a]]&&(n[a]=s.pop())}function u(e,n,i){var r=t(e),o={};return n.forEach(function(t){var e=-1,n=i(t);n.length>0&&(e=0,n.forEach(function(t){e+=r[t]}),e/=n.length),o[t]=e}),o}function c(t){return t.map(function(t){return t.slice(0)})}var h={iterations:24,debugLevel:0},f=d(),p={};return p.iterations=a(p,h,"iterations"),p.debugLevel=a(p,h,"debugLevel",function(t){f.enabled(t)}),p.run=f.wrap("Order Phase",e),p._barycenterLayer=s,p};var l=dagre.layout.order.crossCount=function(t,e){var n,i=0;return e.forEach(function(e){n&&(i+=c(t,n,e)),n=e}),i},c=dagre.layout.order.bilayerCrossCount=function(e,n,i){var r=t(i),o=[];n.forEach(function(t){var n=[];e.outEdges(t).forEach(function(t){n.push(r[e.target(t)])}),n.sort(function(t,e){return t-e}),o=o.concat(n)});for(var s=1;i.length>s;)s<<=1;var a=2*s-1;s-=1;for(var u=[],l=0;a>l;++l)u[l]=0;var c=0;return o.forEach(function(t){var e=t+s;for(++u[e];e>0;)e%2&&(c+=u[e+1]),e=e-1>>1,++u[e]}),c};dagre.layout.position=function(){function t(t){var e=[];t.eachNode(function(t,n){var i=e[n.rank]||(e[n.rank]=[]);i[n.order]=t});var o=r(t,e),a={};["u","d"].forEach(function(n){"d"===n&&e.reverse(),["l","r"].forEach(function(i){"r"===i&&p(e);var r=n+i,l=s(t,e,o,"u"===n?"predecessors":"successors");a[r]=u(t,e,l.pos,l.root,l.align),"r"===i&&f(a[r]),"r"===i&&p(e)}),"d"===n&&e.reverse()}),h(t,e,a),t.eachNode(function(e){var n=[];for(var i in a)b(i,t,e,a[i][e]),n.push(a[i][e]);n.sort(function(t,e){return t-e}),y(t,e,(n[1]+n[2])/2)});var l=n(t.nodes().map(function(e){return y(t,e)-g(t,e)/2}));t.eachNode(function(e){y(t,e,y(t,e)-l)});var c=0;e.forEach(function(e){var n=i(e.map(function(e){return m(t,e)}));c+=n/2,e.forEach(function(e){_(t,e,c)}),c+=n/2+x.rankSep})}function e(t,e){return e>t?(""+t).length+":"+t+"-"+e:(""+e).length+":"+e+"-"+t}function r(t,n){var i={},r={};if(2>=n.length)return i;n[1].forEach(function(t,e){r[t]=e});for(var o=1;n.length-1>o;++o)for(var s=n[o],a=n[o+1],u=0,l=0,c=0;a.length>c;++c){var h=a[c];r[h]=c;var f=void 0;if(t.node(h).dummy){var d=t.predecessors(h)[0];t.node(d).dummy&&(f=r[d])}if(void 0===f&&c===a.length-1&&(f=s.length-1),void 0!==f){for(;c>=l;++l)t.predecessors(a[l]).forEach(function(t){var n=r[t];(u>n||n>f)&&(i[e(a[l],t)]=!0)});u=f}}return i}function s(t,n,i,r){var o={},s={},a={};return n.forEach(function(t){t.forEach(function(t,e){s[t]=t,a[t]=t,o[t]=e})}),n.forEach(function(n){var u=-1;n.forEach(function(n){var l,c=t[r](n);c.length>0&&(c.sort(function(t,e){return o[t]-o[e]}),l=(c.length-1)/2,c.slice(Math.floor(l),Math.ceil(l)+1).forEach(function(t){a[n]===n&&!i[e(t,n)]&&o[t]>u&&(a[t]=n,a[n]=s[n]=s[t],u=o[t])}))})}),{pos:o,root:s,align:a}}function u(t,e,n,i,r){function s(e){if(!(e in c)){c[e]=0;var o=e;do{if(n[o]>0){var h=i[l[o]];s(h),a[e]===e&&(a[e]=a[h]);var f=v(t,l[o])+v(t,o);a[e]!==a[h]?u[a[h]]=Math.min(u[a[h]]||Number.POSITIVE_INFINITY,c[e]-c[h]-f):c[e]=Math.max(c[e],c[h]+f)}o=r[o]}while(o!==e)}}var a={},u={},l={},c={};return e.forEach(function(t){t.forEach(function(e,n){a[e]=e,n>0&&(l[e]=t[n-1])})}),o(i).forEach(function(t){s(t)}),e.forEach(function(t){t.forEach(function(t){c[t]=c[i[t]];var e=u[a[t]];i[t]===t&&Number.POSITIVE_INFINITY>e&&(c[t]+=e)})}),c}function l(t,e,i){return n(e.map(function(t){var e=t[0];return i[e]}))}function c(t,e,n){return i(e.map(function(t){var e=t[t.length-1];return n[e]}))}function h(t,e,n){var i,r={},o={},s={},a=Number.POSITIVE_INFINITY;for(var u in n){var h=n[u];r[u]=l(t,e,h),o[u]=c(t,e,h);var f=o[u]-r[u];a>f&&(a=f,i=u)}["u","d"].forEach(function(t){["l","r"].forEach(function(e){var n=t+e;s[n]="l"===e?r[i]-r[n]:o[i]-o[n]})});for(var u in n)t.eachNode(function(t){n[u][t]+=s[u]})}function f(t){for(var e in t)t[e]=-t[e]}function p(t){t.forEach(function(t){t.reverse()})}function g(t,e){switch(x.rankDir){case"LR":return t.node(e).height;default:return t.node(e).width}}function m(t,e){switch(x.rankDir){case"LR":return t.node(e).width;default:return t.node(e).height}}function v(t,e){if(null!==x.universalSep)return x.universalSep;var n=g(t,e),i=t.node(e).dummy?x.edgeSep:x.nodeSep;return(n+i)/2}function y(t,e,n){switch(x.rankDir){case"LR":if(3>arguments.length)return t.node(e).y;t.node(e).y=n;break;default:if(3>arguments.length)return t.node(e).x;t.node(e).x=n}}function b(t,e,n,i){switch(x.rankDir){case"LR":if(3>arguments.length)return e.node(n)[t];e.node(n)[t]=i;break;default:if(3>arguments.length)return e.node(n)[t];e.node(n)[t]=i}}function _(t,e,n){switch(x.rankDir){case"LR":if(3>arguments.length)return t.node(e).x;t.node(e).x=n;break;default:if(3>arguments.length)return t.node(e).y;t.node(e).y=n}}var x={nodeSep:50,edgeSep:10,universalSep:null,rankSep:30,rankDir:"TB",debugLevel:0},w=d(),k={};return k.nodeSep=a(k,x,"nodeSep"),k.edgeSep=a(k,x,"edgeSep"),k.universalSep=a(k,x,"universalSep"),k.rankSep=a(k,x,"rankSep"),k.rankDir=a(k,x,"rankDir"),k.debugLevel=a(k,x,"debugLevel",function(t){w.enabled(t)}),k.run=w.wrap("Position Phase",t),k},dagre.util={};var h=dagre.util.keys=Object.keys,f=dagre.util.components=function(t){function e(n,r){n in i||(i[n]=!0,r.push(n),t.neighbors(n).forEach(function(t){e(t,r)}))}var n=[],i={};return t.eachNode(function(t){var i=[];e(t,i),i.length>0&&n.push(i)}),n},d=(dagre.util.prim=function(t,e){var n={},i={},r=u();if(0===t.nodes().length)return n;t.eachNode(function(t){r.add(t,Number.POSITIVE_INFINITY),n[t]=[]}),r.decrease(t.nodes()[0],0);for(var o,s=!1;r.size()>0;){if(o=r.removeMin(),o in i)n[o].push(i[o]),n[i[o]].push(o);else{if(s)throw Error("Input graph is not connected:\n"+(""+t));s=!0}t.neighbors(o).forEach(function(t){var n=r.priority(t);if(void 0!==n){var s=e(o,t);n>s&&(i[t]=o,r.decrease(t,s))}})}return n},dagre.util.intersectRect=function(t,e){var n,i,r=t.x,o=t.y,s=e.x-r,a=e.y-o,u=t.width/2,l=t.height/2;return Math.abs(a)*u>Math.abs(s)*l?(0>a&&(l=-l),n=0===a?0:l*s/a,i=l):(0>s&&(u=-u),n=u,i=0===s?0:u*a/s),{x:r+n,y:o+i}},dagre.util.pointStr=function(t){return t.x+","+t.y},function(){var t={},e=!1;return t.enabled=function(n){return arguments.length?(e=n,t):e},t.wrap=function(t,n){return function(){var i=e?(new Date).getTime():null;try{return n.apply(null,arguments)}finally{i&&console.log(t+" time: "+((new Date).getTime()-i)+"ms")}}},t});dagre.dot={},dagre.dot.toGraph=function(t){function n(t,n){a.hasNode(t)||(a.addNode(t,c.get("node",{id:t})),void 0===a.node(t).label&&(a.node(t).label=t)),n&&e(n,a.node(t))}function i(t,n,i){var r=t+"-"+n,o=l[r];o||(o=l[r]=0),l[r]++;var s=i.id||r+"-"+o,u={};e(c.get("edge",i),u),e({id:s},u),a.addEdge(s,t,n,u)}function r(t){var e,n={},i=[];for(i.push(t);0!=i.length;)switch(e=i.pop(),e.type){case"node":n[e.id]=!0;break;case"edge":e.elems.forEach(function(t){i.push(t)});break;case"subgraph":e.stmts.forEach(function(t){i.push(t)})}return dagre.util.keys(n)}function o(t){var e=t.attrs;switch(t.type){case"node":n(t.id,e);break;case"edge":var s,a;t.elems.forEach(function(t){switch(o(t),t.type){case"node":a=[t.id];break;case"subgraph":a=r(t);break;default:throw Error("Unsupported type incident on edge: "+t.type)}s&&s.forEach(function(t){a.forEach(function(n){i(t,n,e),u&&i(n,t,e)})}),s=a});break;case"subgraph":c.enterSubGraph(),t.stmts.forEach(function(t){o(t)}),c.exitSubGraph();break;case"attr":c.set(t.attrType,e);break;default:throw Error("Unsupported statement type: "+t.type)}}var s=dot_parser.parse(t),a=dagre.graph(),u="graph"===s.type,l={},c={_default:{},get:function(t,n){if(void 0!==this._default[t]){var i={};return e(this._default[t],i),e(n,i),i}return n},set:function(t,e){this._default[t]=this.get(t,e)},enterSubGraph:function(){function t(){}t.prototype=this._default;var e=new t;this._default=e},exitSubGraph:function(){this._default=Object.getPrototypeOf(this._default)}};return s.stmts&&s.stmts.forEach(function(t){o(t)}),a},dagre.dot.toObjects=function(t){var e=dagre.dot.toGraph(t),n=e.nodes().map(function(t){return e.node(t)}),i=e.edges().map(function(t){var n=e.edge(t);return n.source=e.node(e.source(t)),n.target=e.node(e.target(t)),n});return{nodes:n,edges:i}},dot_parser=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,n){function i(t){F>L||(L>F&&(F=L,R=[]),R.push(t))}function r(){var t,n,r,s,a,u,l,c,h,f,d,p,g,m,v,y;for(m=L,v=L,t=[],n=N();null!==n;)t.push(n),n=N();if(null!==t)if(y=L,n=S(),null!==n?(r=N(),null!==r?n=[n,r]:(n=null,L=y)):(n=null,L=y),n=null!==n?n:"",null!==n)if(r=T(),null!==r){for(s=[],a=N();null!==a;)s.push(a),a=N();if(null!==s)if(a=x(),a=null!==a?a:"",null!==a){for(u=[],l=N();null!==l;)u.push(l),l=N();if(null!==u)if(123===e.charCodeAt(L)?(l="{",L++):(l=null,0===j&&i('"{"')),null!==l){for(c=[],h=N();null!==h;)c.push(h),h=N();if(null!==c)if(h=o(),h=null!==h?h:"",null!==h){for(f=[],d=N();null!==d;)f.push(d),d=N();if(null!==f)if(125===e.charCodeAt(L)?(d="}",L++):(d=null,0===j&&i('"}"')),null!==d){for(p=[],g=N();null!==g;)p.push(g),g=N();null!==p?t=[t,n,r,s,a,u,l,c,h,f,d,p]:(t=null,L=v)}else t=null,L=v;else t=null,L=v}else t=null,L=v;else t=null,L=v}else t=null,L=v;else t=null,L=v}else t=null,L=v;else t=null,L=v}else t=null,L=v;else t=null,L=v;else t=null,L=v;return null!==t&&(t=function(t,e,n,i){return{type:e,id:n,stmts:i}}(m,t[2],t[4],t[8])),null===t&&(L=m),t}function o(){var t,n,r,o,a,u,l,c,h,f,d;if(h=L,f=L,t=s(),null!==t){for(n=[],r=N();null!==r;)n.push(r),r=N();if(null!==n)if(59===e.charCodeAt(L)?(r=";",L++):(r=null,0===j&&i('";"')),r=null!==r?r:"",null!==r){for(o=[],d=L,a=[],u=N();null!==u;)a.push(u),u=N();if(null!==a)if(u=s(),null!==u){for(l=[],c=N();null!==c;)l.push(c),c=N();null!==l?(59===e.charCodeAt(L)?(c=";",L++):(c=null,0===j&&i('";"')),c=null!==c?c:"",null!==c?a=[a,u,l,c]:(a=null,L=d)):(a=null,L=d)}else a=null,L=d;else a=null,L=d;for(;null!==a;){for(o.push(a),d=L,a=[],u=N();null!==u;)a.push(u),u=N();if(null!==a)if(u=s(),null!==u){for(l=[],c=N();null!==c;)l.push(c),c=N();null!==l?(59===e.charCodeAt(L)?(c=";",L++):(c=null,0===j&&i('";"')),c=null!==c?c:"",null!==c?a=[a,u,l,c]:(a=null,L=d)):(a=null,L=d)}else a=null,L=d;else a=null,L=d}null!==o?t=[t,n,r,o]:(t=null,L=f)}else t=null,L=f;else t=null,L=f}else t=null,L=f;return null!==t&&(t=function(t,e,n){for(var i=[e],r=0;n.length>r;++r)i.push(n[r][1]);return i}(h,t[0],t[3])),null===t&&(L=h),t}function s(){var t;return t=a(),null===t&&(t=c(),null===t&&(t=h(),null===t&&(t=u(),null===t&&(t=l())))),t}function a(){var t,e,n,i,r;if(i=L,r=L,t=C(),null===t&&(t=w(),null===t&&(t=k())),null!==t){for(e=[],n=N();null!==n;)e.push(n),n=N();null!==e?(n=f(),null!==n?t=[t,e,n]:(t=null,L=r)):(t=null,L=r)}else t=null,L=r;return null!==t&&(t=function(t,e,n){return{type:"attr",attrType:e,attrs:n||{}}}(i,t[0],t[2])),null===t&&(L=i),t}function u(){var t,n,r,o,s,a,u;if(a=L,u=L,t=x(),null!==t){for(n=[],r=N();null!==r;)n.push(r),r=N();if(null!==n)if(61===e.charCodeAt(L)?(r="=",L++):(r=null,0===j&&i('"="')),null!==r){for(o=[],s=N();null!==s;)o.push(s),s=N();null!==o?(s=x(),null!==s?t=[t,n,r,o,s]:(t=null,L=u)):(t=null,L=u)}else t=null,L=u;else t=null,L=u}else t=null,L=u;return null!==t&&(t=function(t,e,n){var i={};return i[e]=n,{type:"inlineAttr",attrs:i}}(a,t[0],t[4])),null===t&&(L=a),t}function l(){var t,e,n,i,r;if(i=L,r=L,t=y(),null!==t){for(e=[],n=N();null!==n;)e.push(n),n=N();null!==e?(n=f(),n=null!==n?n:"",null!==n?t=[t,e,n]:(t=null,L=r)):(t=null,L=r)}else t=null,L=r;return null!==t&&(t=function(t,e,n){return{type:"node",id:e,attrs:n||{}}}(i,t[0],t[2])),null===t&&(L=i),t}function c(){var t,e,n,i,r,o,s;if(o=L,s=L,t=v(),null!==t){for(e=[],n=N();null!==n;)e.push(n),n=N();if(null!==e)if(n=g(),null!==n){for(i=[],r=N();null!==r;)i.push(r),r=N();null!==i?(r=f(),r=null!==r?r:"",null!==r?t=[t,e,n,i,r]:(t=null,L=s)):(t=null,L=s)}else t=null,L=s;else t=null,L=s}else t=null,L=s;return null!==t&&(t=function(t,e,n,i){for(var r=[e],o=0;n.length>o;++o)r.push(n[o]);return{type:"edge",elems:r,attrs:i||{}}}(o,t[0],t[2],t[4])),null===t&&(L=o),t}function h(){var t,n,r,s,a,u,l,c,h,f;if(l=L,c=L,h=L,t=E(),null!==t){for(n=[],r=N();null!==r;)n.push(r),r=N();if(null!==n){if(f=L,r=x(),null!==r){for(s=[],a=N();null!==a;)s.push(a),a=N();null!==s?r=[r,s]:(r=null,L=f)}else r=null,L=f;r=null!==r?r:"",null!==r?t=[t,n,r]:(t=null,L=h)}else t=null,L=h}else t=null,L=h;if(t=null!==t?t:"",null!==t)if(123===e.charCodeAt(L)?(n="{",L++):(n=null,0===j&&i('"{"')),null!==n){for(r=[],s=N();null!==s;)r.push(s),s=N();if(null!==r)if(s=o(),null!==s){for(a=[],u=N();null!==u;)a.push(u),u=N();null!==a?(125===e.charCodeAt(L)?(u="}",L++):(u=null,0===j&&i('"}"')),null!==u?t=[t,n,r,s,a,u]:(t=null,L=c)):(t=null,L=c)}else t=null,L=c;else t=null,L=c}else t=null,L=c;else t=null,L=c;return null!==t&&(t=function(t,e,n){return e=e[2]||[],{type:"subgraph",id:e[0],stmts:n}}(l,t[0],t[3])),null===t&&(L=l),t}function f(){var t,e,n,i,r,o,s;if(r=L,o=L,t=d(),null!==t){for(e=[],s=L,n=[],i=N();null!==i;)n.push(i),i=N();for(null!==n?(i=d(),null!==i?n=[n,i]:(n=null,L=s)):(n=null,L=s);null!==n;){for(e.push(n),s=L,n=[],i=N();null!==i;)n.push(i),i=N();null!==n?(i=d(),null!==i?n=[n,i]:(n=null,L=s)):(n=null,L=s)}null!==e?t=[t,e]:(t=null,L=o)}else t=null,L=o;return null!==t&&(t=function(t,e,n){for(var i=e,r=0;n.length>r;++r)i=O(i,n[r][1]);return i}(r,t[0],t[1])),null===t&&(L=r),t}function d(){var t,n,r,o,s,a,u;if(a=L,u=L,91===e.charCodeAt(L)?(t="[",L++):(t=null,0===j&&i('"["')),null!==t){for(n=[],r=N();null!==r;)n.push(r),r=N();if(null!==n)if(r=p(),r=null!==r?r:"",null!==r){for(o=[],s=N();null!==s;)o.push(s),s=N();null!==o?(93===e.charCodeAt(L)?(s="]",L++):(s=null,0===j&&i('"]"')),null!==s?t=[t,n,r,o,s]:(t=null,L=u)):(t=null,L=u)}else t=null,L=u;else t=null,L=u}else t=null,L=u;return null!==t&&(t=function(t,e){return e}(a,t[2])),null===t&&(L=a),t}function p(){var t,n,r,o,s,a,u,l,c;if(u=L,l=L,t=m(),null!==t){for(n=[],c=L,r=[],o=N();null!==o;)r.push(o),o=N();if(null!==r)if(44===e.charCodeAt(L)?(o=",",L++):(o=null,0===j&&i('","')),o=null!==o?o:"",null!==o){for(s=[],a=N();null!==a;)s.push(a),a=N();null!==s?(a=m(),null!==a?r=[r,o,s,a]:(r=null,L=c)):(r=null,L=c)}else r=null,L=c;else r=null,L=c;for(;null!==r;){for(n.push(r),c=L,r=[],o=N();null!==o;)r.push(o),o=N();if(null!==r)if(44===e.charCodeAt(L)?(o=",",L++):(o=null,0===j&&i('","')),o=null!==o?o:"",null!==o){for(s=[],a=N();null!==a;)s.push(a),a=N();null!==s?(a=m(),null!==a?r=[r,o,s,a]:(r=null,L=c)):(r=null,L=c)}else r=null,L=c;else r=null,L=c}null!==n?t=[t,n]:(t=null,L=l)}else t=null,L=l;return null!==t&&(t=function(t,e,n){for(var i=e,r=0;n.length>r;++r)i=O(i,n[r][3]);return i}(u,t[0],t[1])),null===t&&(L=u),t}function g(){var t,n,r,o,s,a,u,l;if(a=L,u=L,l=L,"--"===e.substr(L,2)?(t="--",L+=2):(t=null,0===j&&i('"--"')),null!==t?(n=function(){return z}(L)?null:"",null!==n?t=[t,n]:(t=null,L=l)):(t=null,L=l),null===t&&(l=L,"->"===e.substr(L,2)?(t="->",L+=2):(t=null,0===j&&i('"->"')),null!==t?(n=function(){return z}(L)?"":null,null!==n?t=[t,n]:(t=null,L=l)):(t=null,L=l)),null!==t){for(n=[],r=N();null!==r;)n.push(r),r=N();if(null!==n)if(r=v(),null!==r){for(o=[],s=N();null!==s;)o.push(s),s=N();null!==o?(s=g(),s=null!==s?s:"",null!==s?t=[t,n,r,o,s]:(t=null,L=u)):(t=null,L=u)}else t=null,L=u;else t=null,L=u}else t=null,L=u;return null!==t&&(t=function(t,e,n){for(var i=[e],r=0;n.length>r;++r)i.push(n[r]);return i}(a,t[2],t[4])),null===t&&(L=a),t}function m(){var t,n,r,o,s,a,u,l;if(a=L,u=L,t=x(),null!==t){for(l=L,n=[],r=N();null!==r;)n.push(r),r=N();if(null!==n)if(61===e.charCodeAt(L)?(r="=",L++):(r=null,0===j&&i('"="')),null!==r){for(o=[],s=N();null!==s;)o.push(s),s=N();null!==o?(s=x(),null!==s?n=[n,r,o,s]:(n=null,L=l)):(n=null,L=l)}else n=null,L=l;else n=null,L=l;n=null!==n?n:"",null!==n?t=[t,n]:(t=null,L=u)}else t=null,L=u;return null!==t&&(t=function(t,e,n){var i={};return i[e]=n[3],i}(a,t[0],t[1])),null===t&&(L=a),t}function v(){var t,e;return t=h(),null===t&&(e=L,t=y(),null!==t&&(t=function(t,e){return{type:"node",id:e,attrs:{}}}(e,t)),null===t&&(L=e)),t}function y(){var t,e,n,i,r;if(i=L,r=L,t=x(),null!==t){for(e=[],n=N();null!==n;)e.push(n),n=N();null!==e?(n=b(),n=null!==n?n:"",null!==n?t=[t,e,n]:(t=null,L=r)):(t=null,L=r)}else t=null,L=r;return null!==t&&(t=function(t,e){return e}(i,t[0])),null===t&&(L=i),t}function b(){var t,n,r,o,s,a,u,l,c;if(l=L,58===e.charCodeAt(L)?(t=":",L++):(t=null,0===j&&i('":"')),null!==t){for(n=[],r=N();null!==r;)n.push(r),r=N();if(null!==n)if(r=x(),null!==r){for(o=[],s=N();null!==s;)o.push(s),s=N();if(null!==o){if(c=L,58===e.charCodeAt(L)?(s=":",L++):(s=null,0===j&&i('":"')),null!==s){for(a=[],u=N();null!==u;)a.push(u),u=N();null!==a?(u=_(),null!==u?s=[s,a,u]:(s=null,L=c)):(s=null,L=c)}else s=null,L=c;s=null!==s?s:"",null!==s?t=[t,n,r,o,s]:(t=null,L=l)}else t=null,L=l}else t=null,L=l;else t=null,L=l}else t=null,L=l;return t}function _(){var t;return 110===e.charCodeAt(L)?(t="n",L++):(t=null,0===j&&i('"n"')),null===t&&("ne"===e.substr(L,2)?(t="ne",L+=2):(t=null,0===j&&i('"ne"')),null===t&&(101===e.charCodeAt(L)?(t="e",L++):(t=null,0===j&&i('"e"')),null===t&&("se"===e.substr(L,2)?(t="se",L+=2):(t=null,0===j&&i('"se"')),null===t&&(115===e.charCodeAt(L)?(t="s",L++):(t=null,0===j&&i('"s"')),null===t&&("sw"===e.substr(L,2)?(t="sw",L+=2):(t=null,0===j&&i('"sw"')),null===t&&(119===e.charCodeAt(L)?(t="w",L++):(t=null,0===j&&i('"w"')),null===t&&("nw"===e.substr(L,2)?(t="nw",L+=2):(t=null,0===j&&i('"nw"')),null===t&&(99===e.charCodeAt(L)?(t="c",L++):(t=null,0===j&&i('"c"')),null===t&&(95===e.charCodeAt(L)?(t="_",L++):(t=null,0===j&&i('"_"'))))))))))),t}function x(){var t,n,r,o,s,a,u,l,c;if(j++,a=L,u=L,/^[a-zA-Z\u0200-\u0377_]/.test(e.charAt(L))?(t=e.charAt(L),L++):(t=null,0===j&&i("[a-zA-Z\\u0200-\\u0377_]")),null!==t){for(n=[],/^[a-zA-Z\u0200-\u0377_0-9]/.test(e.charAt(L))?(r=e.charAt(L),L++):(r=null,0===j&&i("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==r;)n.push(r),/^[a-zA-Z\u0200-\u0377_0-9]/.test(e.charAt(L))?(r=e.charAt(L),L++):(r=null,0===j&&i("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==n?t=[t,n]:(t=null,L=u)}else t=null,L=u;if(null!==t&&(t=function(t,e,n){return e+n.join("")}(a,t[0],t[1])),null===t&&(L=a),null===t){if(a=L,u=L,45===e.charCodeAt(L)?(t="-",L++):(t=null,0===j&&i('"-"')),t=null!==t?t:"",null!==t)if(46===e.charCodeAt(L)?(n=".",L++):(n=null,0===j&&i('"."')),null!==n){if(/^[0-9]/.test(e.charAt(L))?(o=e.charAt(L),L++):(o=null,0===j&&i("[0-9]")),null!==o)for(r=[];null!==o;)r.push(o),/^[0-9]/.test(e.charAt(L))?(o=e.charAt(L),L++):(o=null,0===j&&i("[0-9]"));else r=null;null!==r?t=[t,n,r]:(t=null,L=u)}else t=null,L=u;else t=null,L=u;if(null!==t&&(t=function(t,e,n,i){return e+n+i.join("")}(a,t[0],t[1],t[2])),null===t&&(L=a),null===t){if(a=L,u=L,45===e.charCodeAt(L)?(t="-",L++):(t=null,0===j&&i('"-"')),t=null!==t?t:"",null!==t){if(/^[0-9]/.test(e.charAt(L))?(r=e.charAt(L),L++):(r=null,0===j&&i("[0-9]")),null!==r)for(n=[];null!==r;)n.push(r),/^[0-9]/.test(e.charAt(L))?(r=e.charAt(L),L++):(r=null,0===j&&i("[0-9]"));else n=null;if(null!==n){if(l=L,46===e.charCodeAt(L)?(r=".",L++):(r=null,0===j&&i('"."')),null!==r){for(o=[],/^[0-9]/.test(e.charAt(L))?(s=e.charAt(L),L++):(s=null,0===j&&i("[0-9]"));null!==s;)o.push(s),/^[0-9]/.test(e.charAt(L))?(s=e.charAt(L),L++):(s=null,0===j&&i("[0-9]"));null!==o?r=[r,o]:(r=null,L=l)}else r=null,L=l;r=null!==r?r:"",null!==r?t=[t,n,r]:(t=null,L=u)}else t=null,L=u}else t=null,L=u;if(null!==t&&(t=function(t,e,n,i){return e+n.join("")+(i[0]||"")+(i[1]||[]).join("")}(a,t[0],t[1],t[2])),null===t&&(L=a),null===t){if(a=L,u=L,34===e.charCodeAt(L)?(t='"',L++):(t=null,0===j&&i('"\\""')),null!==t){for(n=[],l=L,'\\"'===e.substr(L,2)?(r='\\"',L+=2):(r=null,0===j&&i('"\\\\\\""')),null!==r&&(r=function(){return'"'}(l)),null===r&&(L=l),null===r&&(l=L,c=L,92===e.charCodeAt(L)?(r="\\",L++):(r=null,0===j&&i('"\\\\"')),null!==r?(/^[^"]/.test(e.charAt(L))?(o=e.charAt(L),L++):(o=null,0===j&&i('[^"]')),null!==o?r=[r,o]:(r=null,L=c)):(r=null,L=c),null!==r&&(r=function(t,e){return"\\"+e}(l,r[1])),null===r&&(L=l),null===r&&(/^[^"]/.test(e.charAt(L))?(r=e.charAt(L),L++):(r=null,0===j&&i('[^"]'))));null!==r;)n.push(r),l=L,'\\"'===e.substr(L,2)?(r='\\"',L+=2):(r=null,0===j&&i('"\\\\\\""')),null!==r&&(r=function(){return'"'}(l)),null===r&&(L=l),null===r&&(l=L,c=L,92===e.charCodeAt(L)?(r="\\",L++):(r=null,0===j&&i('"\\\\"')),null!==r?(/^[^"]/.test(e.charAt(L))?(o=e.charAt(L),L++):(o=null,0===j&&i('[^"]')),null!==o?r=[r,o]:(r=null,L=c)):(r=null,L=c),null!==r&&(r=function(t,e){return"\\"+e}(l,r[1])),null===r&&(L=l),null===r&&(/^[^"]/.test(e.charAt(L))?(r=e.charAt(L),L++):(r=null,0===j&&i('[^"]'))));null!==n?(34===e.charCodeAt(L)?(r='"',L++):(r=null,0===j&&i('"\\""')),null!==r?t=[t,n,r]:(t=null,L=u)):(t=null,L=u)}else t=null,L=u;null!==t&&(t=function(t,e){return e.join("")}(a,t[1])),null===t&&(L=a)}}}return j--,0===j&&null===t&&i("identifier"),t}function w(){var t,n;return n=L,"node"===e.substr(L,4).toLowerCase()?(t=e.substr(L,4),L+=4):(t=null,0===j&&i('"node"')),null!==t&&(t=function(t,e){return e.toLowerCase()}(n,t)),null===t&&(L=n),t}function k(){var t,n;return n=L,"edge"===e.substr(L,4).toLowerCase()?(t=e.substr(L,4),L+=4):(t=null,0===j&&i('"edge"')),null!==t&&(t=function(t,e){return e.toLowerCase()}(n,t)),null===t&&(L=n),t}function C(){var t,n;return n=L,"graph"===e.substr(L,5).toLowerCase()?(t=e.substr(L,5),L+=5):(t=null,0===j&&i('"graph"')),null!==t&&(t=function(t,e){return e.toLowerCase()}(n,t)),null===t&&(L=n),t}function M(){var t,n;return n=L,"digraph"===e.substr(L,7).toLowerCase()?(t=e.substr(L,7),L+=7):(t=null,0===j&&i('"digraph"')),null!==t&&(t=function(t,e){return e.toLowerCase()}(n,t)),null===t&&(L=n),t}function E(){var t,n;return n=L,"subgraph"===e.substr(L,8).toLowerCase()?(t=e.substr(L,8),L+=8):(t=null,0===j&&i('"subgraph"')),null!==t&&(t=function(t,e){return e.toLowerCase()}(n,t)),null===t&&(L=n),t}function S(){var t,n;return n=L,"strict"===e.substr(L,6).toLowerCase()?(t=e.substr(L,6),L+=6):(t=null,0===j&&i('"strict"')),null!==t&&(t=function(t,e){return e.toLowerCase()}(n,t)),null===t&&(L=n),t}function T(){var t,e;return t=C(),null===t&&(e=L,t=M(),null!==t&&(t=function(t,e){return z="digraph"===e,e}(e,t)),null===t&&(L=e)),t}function D(){var t,n;if(j++,/^[ \t\r\n]/.test(e.charAt(L))?(n=e.charAt(L),L++):(n=null,0===j&&i("[ \\t\\r\\n]")),null!==n)for(t=[];null!==n;)t.push(n),/^[ \t\r\n]/.test(e.charAt(L))?(n=e.charAt(L),L++):(n=null,0===j&&i("[ \\t\\r\\n]"));else t=null;return j--,0===j&&null===t&&i("whitespace"),t}function A(){var t,n,r,o,s,a,u;if(j++,s=L,"//"===e.substr(L,2)?(t="//",L+=2):(t=null,0===j&&i('"//"')),null!==t){for(n=[],/^[^\n]/.test(e.charAt(L))?(r=e.charAt(L),L++):(r=null,0===j&&i("[^\\n]"));null!==r;)n.push(r),/^[^\n]/.test(e.charAt(L))?(r=e.charAt(L),L++):(r=null,0===j&&i("[^\\n]"));null!==n?t=[t,n]:(t=null,L=s)}else t=null,L=s;
if(null===t)if(s=L,"/*"===e.substr(L,2)?(t="/*",L+=2):(t=null,0===j&&i('"/*"')),null!==t){for(n=[],a=L,u=L,j++,"*/"===e.substr(L,2)?(r="*/",L+=2):(r=null,0===j&&i('"*/"')),j--,null===r?r="":(r=null,L=u),null!==r?(e.length>L?(o=e.charAt(L),L++):(o=null,0===j&&i("any character")),null!==o?r=[r,o]:(r=null,L=a)):(r=null,L=a);null!==r;)n.push(r),a=L,u=L,j++,"*/"===e.substr(L,2)?(r="*/",L+=2):(r=null,0===j&&i('"*/"')),j--,null===r?r="":(r=null,L=u),null!==r?(e.length>L?(o=e.charAt(L),L++):(o=null,0===j&&i("any character")),null!==o?r=[r,o]:(r=null,L=a)):(r=null,L=a);null!==n?("*/"===e.substr(L,2)?(r="*/",L+=2):(r=null,0===j&&i('"*/"')),null!==r?t=[t,n,r]:(t=null,L=s)):(t=null,L=s)}else t=null,L=s;return j--,0===j&&null===t&&i("comment"),t}function N(){var t;return t=D(),null===t&&(t=A()),t}function I(t){t.sort();for(var e=null,n=[],i=0;t.length>i;i++)t[i]!==e&&(n.push(t[i]),e=t[i]);return n}function P(){for(var t=1,n=1,i=!1,r=0;Math.max(L,F)>r;r++){var o=e.charAt(r);"\n"===o?(i||t++,n=1,i=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t++,n=1,i=!0):(n++,i=!1)}return{line:t,column:n}}function O(t,e){var n={};for(var i in t)n[i]=t[i];for(var i in e)n[i]=e[i];return n}var H={start:r,stmtList:o,stmt:s,attrStmt:a,inlineAttrStmt:u,nodeStmt:l,edgeStmt:c,subgraphStmt:h,attrList:f,attrListBlock:d,aList:p,edgeRHS:g,idDef:m,nodeIdOrSubgraph:v,nodeId:y,port:b,compassPt:_,id:x,node:w,edge:k,graph:C,digraph:M,subgraph:E,strict:S,graphType:T,whitespace:D,comment:A,_:N};if(void 0!==n){if(void 0===H[n])throw Error("Invalid rule name: "+t(n)+".")}else n="start";var z,L=0,j=0,F=0,R=[],$=H[n]();if(null===$||L!==e.length){var W=Math.max(L,F),q=e.length>W?e.charAt(W):null,B=P();throw new this.SyntaxError(I(R),q,W,B.line,B.column)}return $},toSource:function(){return this._source}};return e.SyntaxError=function(e,n,i,r,o){function s(e,n){var i,r;switch(e.length){case 0:i="end of input";break;case 1:i=e[0];break;default:i=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return r=n?t(n):"end of input","Expected "+i+" but "+r+" found."}this.name="SyntaxError",this.expected=e,this.found=n,this.message=s(e,n),this.offset=i,this.line=r,this.column=o},e.SyntaxError.prototype=Error.prototype,e}()}();var nexo=nexo||{};nexo.NexoTerm=Backbone.Model.extend({defaults:{name:"unknown",description:"-",robustness:0},idAttribute:"_id",toJSON:function(){return{_id:1,name:"test"}}});var nexo=nexo||{};$(function(){"use strict";$("#search").click(function(){var t=$("#search-term").val();console.log("Search start! FORM = "+t),$("#result").fadeOut(1e3).empty(),$.getJSON("/search/nexo/"+t,function(t){console.log("Result: \n"+JSON.stringify(t)),console.log("len: \n"+t.length);var e="",n="<tr><th>Term ID</th><th>Name</th></tr>";$("#result").append(n);for(var i=0;t.length>i;i++){var r=t[i],o=r.name.replace("NeXO:",""),s=r["term name"];e+="<tr><td><a href='/nexoview/"+o+"'>",e+=o,e+="</a></td>",e+="<td>",e+=s,e+="</td>",e+="</tr>"}console.log("ROWS = "+e),$("#result").append(e).hide().fadeIn(1e3)})})}),function(){function t(t){var e=t.dagre.points.slice(0),n=dagre.util.intersectRect(t.source.dagre,e[0]),i=dagre.util.intersectRect(t.target.dagre,e[e.length-1]);return e.unshift(n),e.push(i),d3.svg.line().x(function(t){return t.x}).y(function(t){return t.y}).interpolate("linear")(e)}function e(t,e,n){t.dagre.points.forEach(function(t){t.x=Math.max(0,Math.min(svgBBox.width,t.x+e)),t.y=Math.max(0,Math.min(svgBBox.height,t.y+n))})}function n(){var n={};o.forEach(function(t){var e=n[t.source],i=n[t.target];e||(e=n[t.source]={label:t.source,edges:[]}),i||(i=n[t.target]={label:t.target,edges:[]}),e.edges.push(t),i.edges.push(t)});var s=d3.values(n);o.forEach(function(t){t.source=n[t.source],t.target=n[t.target]});var a=d3.select("svg"),u=a.append("g").attr("transform","translate(5, 5)"),l=d3.behavior.zoom().scale(1).on("zoom",function(){var t=d3.event.translate,e=d3.event.scale;u.attr("transform","translate("+t+") scale("+e+")")});a.call(l);var c=u.selectAll("g .node").data(s).enter().append("g").attr("class","node").attr("id",function(t){return"node-"+t.label}),h=u.selectAll("path .edge").data(o).enter().append("path").attr("class","edge").attr("marker-end","url(#arrowhead)"),f=c.append("rect"),d=c.append("text").attr("text-anchor","middle").attr("x",0);d.append("tspan").attr("x",0).attr("dy","1em").text(function(t){return t.label}),d.each(function(t){var e=this.getBBox();t.bbox=e,t.width=e.width+2*i,t.height=e.height+2*i,t.rx=r,t.ry=r}),f.attr("x",function(t){return-(t.bbox.width/2+i)}).attr("y",function(t){return-(t.bbox.height/2+i)}).attr("rx",function(t){return t.rx}).attr("ry",function(t){return t.ry}).attr("width",function(t){return t.width}).attr("height",function(t){return t.height}),d.attr("x",function(t){return-t.bbox.width/2}).attr("y",function(t){return-t.bbox.height/2}),dagre.layout().nodeSep(50).edgeSep(10).rankSep(50).nodes(s).edges(o).debugLevel(1).run(),c.attr("transform",function(t){return"translate("+t.dagre.x+","+t.dagre.y+")"}),h.each(function(t){var e=t.dagre.points;if(!e.length){var n=t.source.dagre,i=t.target.dagre;e.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2})}1===e.length&&e.push({x:e[0].x,y:e[0].y})}),h.attr("id",function(t){return t.dagre.id}).attr("d",function(e){return t(e)});var p=a.node().getBBox();a.attr("width",520),a.attr("height",p.height+10);var g=d3.behavior.drag().origin(function(t){return t.pos?{x:t.pos.x,y:t.pos.y}:{x:t.dagre.x,y:t.dagre.y}}).on("drag",function(n){var i=n.dagre.x,r=n.dagre.y;n.dagre.x=Math.max(n.width/2,Math.min(p.width-n.width/2,d3.event.x)),n.dagre.y=Math.max(n.height/2,Math.min(p.height-n.height/2,d3.event.y)),d3.select(this).attr("transform","translate("+n.dagre.x+","+n.dagre.y+")");var o=n.dagre.x-i,s=n.dagre.y-r;n.edges.forEach(function(n){e(n,o,s),d3.select("#"+n.dagre.id).attr("d",t(n))})}),m=d3.behavior.drag().on("drag",function(n){e(n,d3.event.dx,d3.event.dy),d3.select(this).attr("d",t(n))});c.call(g),h.call(m)}var i=10,r=10,o=[],s=$("title").text(),a=s.split(" "),u=a[a.length-1],l="NeXO:"+u;console.log("#### Target ID = "+u),console.log("#### Target ID STR = "+l),$.getJSON("/nexo/"+u+"/path.json",function(t){console.log("PATH Result: \n"+JSON.stringify(t));var e=t.elements.edges,i=e.length;o=[];for(var r=0;i>r;r++){var s=e[r].data.source,a=e[r].data.target,u={source:s,target:a};o.push(u)}n()})}(),this.JST=this.JST||{};var nexo=nexo||{};nexo.NexoTermView=Backbone.View.extend({tagName:"div",className:"termContainer",template:$("#termTemplate").html(),events:{},render:function(){var t=_.template(this.template);return this.$el.html(t(this.model.toJSON())),this}});var nexo=nexo||{};nexo.NexoTermListView=Backbone.View.extend({el:$("#terms"),initialize:function(){this.collection=new nexo.NexoTermList,this.collection.fetch(),this.render(),this.listenTo(this.collection,"show",this.renderTerm),this.listenTo(this.collection,"reset",this.render)},events:{"click #search":"showTerms"},showTerms:function(t){t.preventDefault();var e={};$("#search div").children("input").each(function(){console.log("Renderer called!")}),this.collection.create(e)},render:function(){this.collection.each(function(t){this.renderTerm(t)},this)},renderTerm:function(t){var e=new nexo.NexoTermView({model:t});this.$el.append(e.render().el)}});